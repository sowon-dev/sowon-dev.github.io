<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>야망찬 개발자의 블로그</title>
    <link>https://sowon-dev.github.io/</link>
    
    <atom:link href="https://sowon-dev.github.io/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>devlog</description>
    <pubDate>Sat, 14 Aug 2021 14:52:19 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>[Spring]Junit</title>
      <link>https://sowon-dev.github.io/2021/08/13/210813Spring-junit/</link>
      <guid>https://sowon-dev.github.io/2021/08/13/210813Spring-junit/</guid>
      <pubDate>Fri, 13 Aug 2021 05:43:15 GMT</pubDate>
      
      <description>&lt;p&gt;Junit 사용법을 예시와 함께 확인해보자&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>Junit 사용법을 예시와 함께 확인해보자</p><a id="more"></a><h2 id="Junit"><a href="#Junit" class="headerlink" title="Junit"></a>Junit</h2><ul><li>java 기반의 단위 테스트를 위한 프레임워크</li><li>어노테이션기반으로 테스트 지원</li><li>Assert를 통해서 예상과 실제를 비교하여 검증</li></ul><p><br><br><br></p><h2 id="Mock"><a href="#Mock" class="headerlink" title="Mock"></a>Mock</h2><p>Mock이란 실제 사용되어야하는 객체의 대체객체로 실제 객체를 만들어서 하기엔 시간이 부족하고 비용이 높은 경우, 구현이 까다로울 경우에 가짜 객체를 만들어서 사용하는데 그중 하나가 Mock객체이다.</p><ul><li>행위를 검증하기 위해 사용되는 객체</li><li>직접 만들거나 스프링프레임워크를 통해서 간단하게 만들수 있음</li><li>@Mock</li><li>@MockBean</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Spring/">Spring</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/%ED%8C%A8%EC%8A%A4%ED%8A%B8%EC%BA%A0%ED%8D%BC%EC%8A%A4-%EC%B4%88%EA%B2%A9%EC%B0%A8Java-Spring/">패스트캠퍼스(초격차Java/Spring)</category>
      
      
      <comments>https://sowon-dev.github.io/2021/08/13/210813Spring-junit/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[Spring]RestTemplate 활용</title>
      <link>https://sowon-dev.github.io/2021/08/12/210812Spring-resttemplate/</link>
      <guid>https://sowon-dev.github.io/2021/08/12/210812Spring-resttemplate/</guid>
      <pubDate>Thu, 12 Aug 2021 05:26:59 GMT</pubDate>
      
      <description>&lt;p&gt;클라이언트와 서버끼리 RestTemplate객체를 사용하여 JSON을 주고받을 수 있다.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>클라이언트와 서버끼리 RestTemplate객체를 사용하여 JSON을 주고받을 수 있다.</p><a id="more"></a><h2 id="클라이언트"><a href="#클라이언트" class="headerlink" title="클라이언트"></a>클라이언트</h2><p>클라이언트에서 GET방식, POST방식으로 서버에 응답을 요청해보자.</p><p><br><br><br></p><h3 id="ClientApiController-java"><a href="#ClientApiController-java" class="headerlink" title="ClientApiController.java"></a>ClientApiController.java</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/api/client"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClientApiController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RestTemplateService service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">""</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> UserResponse <span class="title">getHello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">log.info(<span class="string">"get메서드 호출"</span>);</span><br><span class="line"><span class="keyword">return</span> service.hello();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">""</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">post</span><span class="params">()</span> </span>&#123;</span><br><span class="line">log.info(<span class="string">"post메서드 호출"</span>);</span><br><span class="line">service.post();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/exchange"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> UserResponse <span class="title">exchange</span><span class="params">()</span> </span>&#123;</span><br><span class="line">log.info(<span class="string">"exchange메서드 호출"</span>);</span><br><span class="line"><span class="keyword">return</span> service.exchange();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/genericExchange"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Req&lt;UserResponse&gt; <span class="title">genericExchange</span><span class="params">()</span> </span>&#123;</span><br><span class="line">log.info(<span class="string">"genericExchange메서드 호출"</span>);</span><br><span class="line"><span class="keyword">return</span> service.genericExchange();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h3 id="RestTemplateService-java"><a href="#RestTemplateService-java" class="headerlink" title="RestTemplateService.java"></a>RestTemplateService.java</h3><ul><li>UriComponentsBuilder: 원하는 uri를 만들 수 있는 객체</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RestTemplateService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> UserResponse <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//클라이언트이므로 주소를 만들어서 리턴해야한다 -&gt; 이때 URI컴포넌트를 주로 사용함.</span></span><br><span class="line">URI uri = UriComponentsBuilder</span><br><span class="line">.fromUriString(<span class="string">"http://localhost:9090"</span>)</span><br><span class="line">.path(<span class="string">"/api/server"</span>)</span><br><span class="line"><span class="comment">//쿼리파람을 사용할 수 있다.</span></span><br><span class="line">.queryParam(<span class="string">"name"</span>, <span class="string">"신경숙"</span>)</span><br><span class="line">.queryParam(<span class="string">"age"</span>, <span class="number">22</span>)</span><br><span class="line">.encode()</span><br><span class="line">.build()</span><br><span class="line">.toUri();</span><br><span class="line">System.out.println(<span class="string">"@ uri.toString(): "</span> + uri.toString());</span><br><span class="line"></span><br><span class="line"><span class="comment">/* =====================================================================</span></span><br><span class="line"><span class="comment"> * getForObject()와 getForEntity()의 차이</span></span><br><span class="line"><span class="comment"> * 여기서 get은 가져온다의 get이 아니라 HTTP GET 메서드의 get이다.</span></span><br><span class="line"><span class="comment"> * getForObject(): Object형태</span></span><br><span class="line"><span class="comment"> * getForEntity(): Entity형태로 getStatusCode(), getBody()를 확인할 수 있어 유용</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * =====================================================================</span></span><br><span class="line"><span class="comment"> * 두 방식 다 동일한 결과를 나타냄</span></span><br><span class="line"><span class="comment"> * 1. String으로 테스트</span></span><br><span class="line"><span class="comment"> * 호출: http://localhost:8083/api/client</span></span><br><span class="line"><span class="comment"> * 결과: 안녕 나는 클라이언트야, 내가 사라져볼께 얍! 안녕 나는 서버야</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * 2. UserResponse로 json 받기</span></span><br><span class="line"><span class="comment"> * 호출: http://localhost:8083/api/client</span></span><br><span class="line"><span class="comment"> * 결과: &#123;</span></span><br><span class="line"><span class="comment"> *    "name": "신경숙",</span></span><br><span class="line"><span class="comment"> *    "age": 22</span></span><br><span class="line"><span class="comment"> *&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 상세정보를 알기 위해서 ResponseEntity를 받는 것을 추천</span></span><br><span class="line">RestTemplate rt = <span class="keyword">new</span> RestTemplate();</span><br><span class="line"></span><br><span class="line"><span class="comment">//String result1 = rt.getForObject(uri, String.class);</span></span><br><span class="line">UserResponse result1 = rt.getForObject(uri, UserResponse<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">System.out.println(<span class="string">"@ result1: "</span>+result1.toString());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//ResponseEntity&lt;String&gt; result2 = rt.getForEntity(uri, String.class);</span></span><br><span class="line">ResponseEntity&lt;UserResponse&gt; result2 = rt.getForEntity(uri, UserResponse<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">System.out.println(<span class="string">"@ HTTP CODE확인: "</span>+result2.getStatusCode());</span><br><span class="line">System.out.println(<span class="string">"@ BODY 확인: "</span>+result2.getBody());</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> result2.getBody();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">post</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">URI uri = UriComponentsBuilder</span><br><span class="line">.fromUriString(<span class="string">"http://localhost:9090"</span>)</span><br><span class="line">.path(<span class="string">"/api/server/user/&#123;userId&#125;/name/&#123;userName&#125;"</span>)</span><br><span class="line">.encode()</span><br><span class="line">.build()</span><br><span class="line"><span class="comment">//위 PathVariable과 expand()안 콤마로 순서대로 매칭</span></span><br><span class="line">.expand(<span class="string">"wony"</span>, <span class="string">"choi"</span>)</span><br><span class="line">.toUri();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"@ uri.toString(): "</span> + uri.toString());</span><br><span class="line"></span><br><span class="line">UserRequest req = <span class="keyword">new</span> UserRequest();</span><br><span class="line">req.setAge(<span class="number">44</span>);</span><br><span class="line">req.setName(<span class="string">"최정원"</span>);</span><br><span class="line"></span><br><span class="line">RestTemplate rt = <span class="keyword">new</span> RestTemplate();</span><br><span class="line">ResponseEntity&lt;UserResponse&gt; res = rt.postForEntity(uri, req, UserResponse<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">System.out.println(<span class="string">"@ HTTP CODE확인: "</span>+res.getStatusCode());</span><br><span class="line">System.out.println(<span class="string">"@ HTTP Header확인: "</span>+res.getHeaders());</span><br><span class="line">System.out.println(<span class="string">"@ BODY 확인: "</span>+res.getBody());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> UserResponse <span class="title">exchange</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">URI uri = UriComponentsBuilder</span><br><span class="line">.fromUriString(<span class="string">"http://localhost:9090"</span>)</span><br><span class="line">.path(<span class="string">"/api/server/user/&#123;userId&#125;/name/&#123;userName&#125;"</span>)</span><br><span class="line">.encode()</span><br><span class="line">.build()</span><br><span class="line"><span class="comment">//위 PathVariable과 expand()안 콤마로 순서대로 매칭</span></span><br><span class="line">.expand(<span class="string">"wony"</span>, <span class="string">"choi"</span>)</span><br><span class="line">.toUri();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"@ uri.toString(): "</span> + uri.toString());</span><br><span class="line"></span><br><span class="line">UserRequest userReq = <span class="keyword">new</span> UserRequest();</span><br><span class="line">userReq.setAge(<span class="number">44</span>);</span><br><span class="line">userReq.setName(<span class="string">"최정원"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// requestEntity로 header에 원하는 데이터를 넣어서 보낼 수 있다.</span></span><br><span class="line">RequestEntity&lt;UserRequest&gt; reqEntity = RequestEntity</span><br><span class="line">.post(uri)</span><br><span class="line">.contentType(MediaType.APPLICATION_JSON)</span><br><span class="line">.header(<span class="string">"x-authorization"</span>, <span class="string">"abc"</span>)</span><br><span class="line">.header(<span class="string">"custom-header"</span>, <span class="string">"ABC"</span>)</span><br><span class="line">.body(userReq);</span><br><span class="line"></span><br><span class="line">RestTemplate resTemplate = <span class="keyword">new</span> RestTemplate();</span><br><span class="line">ResponseEntity&lt;UserResponse&gt; res = resTemplate.exchange(reqEntity, UserResponse<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="keyword">return</span> res.getBody();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 내가 원하는 Req&lt;UserResponse&gt; 타입의 JSON형태 주고 받기</span></span><br><span class="line"><span class="comment">/*&#123;</span></span><br><span class="line"><span class="comment">    "header": &#123;</span></span><br><span class="line"><span class="comment">        "resCode": null</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    "responseBody": &#123;</span></span><br><span class="line"><span class="comment">        "name": "가나다",</span></span><br><span class="line"><span class="comment">        "age": 55</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Req&lt;UserResponse&gt; <span class="title">genericExchange</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">URI uri = UriComponentsBuilder</span><br><span class="line">.fromUriString(<span class="string">"http://localhost:9090"</span>)</span><br><span class="line">.path(<span class="string">"/api/server/user/&#123;userId&#125;/name/&#123;userName&#125;"</span>)</span><br><span class="line">.encode()</span><br><span class="line">.build()</span><br><span class="line"><span class="comment">//위 PathVariable과 expand()안 콤마로 순서대로 매칭</span></span><br><span class="line">.expand(<span class="string">"wony"</span>, <span class="string">"choi"</span>)</span><br><span class="line">.toUri();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"@ uri.toString(): "</span> + uri.toString());</span><br><span class="line"></span><br><span class="line">UserRequest userReq = <span class="keyword">new</span> UserRequest();</span><br><span class="line">userReq.setAge(<span class="number">55</span>);</span><br><span class="line">userReq.setName(<span class="string">"가나다"</span>);</span><br><span class="line"></span><br><span class="line">Req&lt;UserRequest&gt; req = <span class="keyword">new</span> Req&lt;&gt;();</span><br><span class="line">req.setHeader(<span class="keyword">new</span> Req.Header());</span><br><span class="line">req.setResponseBody(userReq);</span><br><span class="line"></span><br><span class="line"><span class="comment">// requestEntity로 header에 원하는 데이터를 넣어서 보낼 수 있다.</span></span><br><span class="line">RequestEntity&lt;Req&lt;UserRequest&gt;&gt; reqEntity = RequestEntity</span><br><span class="line">.post(uri)</span><br><span class="line">.contentType(MediaType.APPLICATION_JSON)</span><br><span class="line">.header(<span class="string">"x-authorization"</span>, <span class="string">"abc"</span>)</span><br><span class="line">.header(<span class="string">"custom-header"</span>, <span class="string">"ABC"</span>)</span><br><span class="line">.body(req);</span><br><span class="line"></span><br><span class="line">RestTemplate resTemplate = <span class="keyword">new</span> RestTemplate();</span><br><span class="line"><span class="comment">// 제네릭에는 class를 사용할 수 없다 즉, Req&lt;UserResponse&gt;.class -&gt; 오류발생 -&gt; 따라서 RestTemplate의 ParameterizedTypeReference를 사용해야한다. </span></span><br><span class="line"><span class="comment">// ResponseEntity&lt;Req&lt;UserResponse&gt;&gt; res = resTemplate.exchange(reqEntity, Req&lt;UserResponse&gt;.class);</span></span><br><span class="line">ResponseEntity&lt;Req&lt;UserResponse&gt;&gt; res = resTemplate.exchange(reqEntity, <span class="keyword">new</span> ParameterizedTypeReference&lt;Req&lt;UserResponse&gt;&gt;()&#123;&#125;);</span><br><span class="line"><span class="keyword">return</span> res.getBody();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h3 id="UserResponse-java"><a href="#UserResponse-java" class="headerlink" title="UserResponse.java"></a>UserResponse.java</h3><p>응답 DTO이다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserResponse</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h3 id="UserRequest-java"><a href="#UserRequest-java" class="headerlink" title="UserRequest.java"></a>UserRequest.java</h3><p>요청 DTO이다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserRequest</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h3 id="Req-java"><a href="#Req-java" class="headerlink" title="Req.java"></a>Req.java</h3><p>DTO이다. 제네릭타입으로 원하는 JSON형태를 만들 수 있다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Req</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Header header;</span><br><span class="line"><span class="keyword">private</span> T responseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Header</span></span>&#123;</span><br><span class="line"><span class="keyword">private</span> String resCode;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="서버"><a href="#서버" class="headerlink" title="서버"></a>서버</h2><p>클라이언트의 요청에 적절한 응답을 할 수 있다.</p><p><br><br><br></p><h3 id="ServerApiComtroller-java"><a href="#ServerApiComtroller-java" class="headerlink" title="ServerApiComtroller.java"></a>ServerApiComtroller.java</h3><ul><li>순수한 HttpEntity<String>을 파라미터 변수로 받으면 디버깅 등에 유용하다</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/api/server"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerApiComtroller</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">""</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">hello</span><span class="params">(@RequestParam String name, @RequestParam <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">User u = <span class="keyword">new</span> User();</span><br><span class="line">u.setName(name);</span><br><span class="line">u.setAge(age);</span><br><span class="line"><span class="keyword">return</span> u;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//@PostMapping("/user/&#123;userId&#125;/name/&#123;userName&#125;")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">post</span><span class="params">(@RequestBody User user, </span></span></span><br><span class="line"><span class="function"><span class="params"> @PathVariable String userId, </span></span></span><br><span class="line"><span class="function"><span class="params"> @PathVariable String userName)</span> </span>&#123;</span><br><span class="line">log.info(<span class="string">"client req: &#123;&#125;"</span>, user);</span><br><span class="line">log.info(<span class="string">"userId: &#123;&#125;, userName: &#123;&#125;"</span>, userId, userName);</span><br><span class="line"><span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//@PostMapping("/user/&#123;userId&#125;/name/&#123;userName&#125;")</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">exchange</span><span class="params">(@RequestBody User user, </span></span></span><br><span class="line"><span class="function"><span class="params"> @PathVariable String userId,</span></span></span><br><span class="line"><span class="function"><span class="params"> @PathVariable String userName,</span></span></span><br><span class="line"><span class="function"><span class="params"> @RequestHeader(<span class="string">"x-authorization"</span>)</span> String xAuthorization,</span></span><br><span class="line"><span class="function"> @<span class="title">RequestHeader</span><span class="params">(<span class="string">"custom-header"</span>)</span> String customHeader</span></span><br><span class="line"><span class="function"> ) </span>&#123;</span><br><span class="line">log.info(<span class="string">"client req: &#123;&#125;"</span>, user);</span><br><span class="line">log.info(<span class="string">"userId: &#123;&#125;, userName: &#123;&#125;"</span>, userId, userName);</span><br><span class="line">log.info(<span class="string">"xAuthorization: &#123;&#125;, customHeader: &#123;&#125;"</span>, xAuthorization, customHeader);</span><br><span class="line"><span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 순수한 HttpEntity&lt;String&gt;을 파라미터 변수로 받으면 디버깅 등에 유용하다</span></span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">"/user/&#123;userId&#125;/name/&#123;userName&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Req&lt;User&gt; <span class="title">genericExchange</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">//HttpEntity&lt;String&gt; entity, </span></span></span><br><span class="line"><span class="function"><span class="params">@RequestBody Req&lt;User&gt; user, </span></span></span><br><span class="line"><span class="function"><span class="params">@PathVariable String userId,</span></span></span><br><span class="line"><span class="function"><span class="params">@PathVariable String userName,</span></span></span><br><span class="line"><span class="function"><span class="params">@RequestHeader(<span class="string">"x-authorization"</span>)</span> String xAuthorization,</span></span><br><span class="line"><span class="function">@<span class="title">RequestHeader</span><span class="params">(<span class="string">"custom-header"</span>)</span> String customHeader</span></span><br><span class="line"><span class="function">) </span>&#123;</span><br><span class="line"><span class="comment">//log.info("entity 순수한 : &#123;&#125;", entity);</span></span><br><span class="line">log.info(<span class="string">"HttpEntity&lt;String&gt; 디버깅 등에 유용: &#123;&#125;"</span>, user);</span><br><span class="line">log.info(<span class="string">"userId: &#123;&#125;, userName: &#123;&#125;"</span>, userId, userName);</span><br><span class="line">log.info(<span class="string">"xAuthorization: &#123;&#125;, customHeader: &#123;&#125;"</span>, xAuthorization, customHeader);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 원하는 json형태로 응답하기</span></span><br><span class="line"><span class="comment">/*&#123;</span></span><br><span class="line"><span class="comment">    "header": &#123;</span></span><br><span class="line"><span class="comment">        "resCode": null</span></span><br><span class="line"><span class="comment">    &#125;,</span></span><br><span class="line"><span class="comment">    "responseBody": &#123;</span></span><br><span class="line"><span class="comment">        "name": "가나다",</span></span><br><span class="line"><span class="comment">        "age": 55</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line">Req&lt;User&gt; response = <span class="keyword">new</span> Req&lt;&gt;();</span><br><span class="line">response.setHeader(<span class="keyword">new</span> Req.Header());</span><br><span class="line">response.setResponseBody(user.getResponseBody());</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> response;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h3 id="User-java"><a href="#User-java" class="headerlink" title="User.java"></a>User.java</h3><ul><li>@Data: @ToString, @EqualsAndHashCode, @Getter(모든 필드), @Setter(정적 필드가 아닌 모든 필드), @RequiredArgsConstructor</li><li>@NoArgsConstructor: 파라미터가 없는 기본 생성자 생성</li><li>@AllArgsConstructor: 모든 필드 값을 파라미터로 받는 생성자 생성</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h3 id="Req-java-1"><a href="#Req-java-1" class="headerlink" title="Req.java"></a>Req.java</h3><p>DTO이다. 제네릭타입으로 원하는 JSON형태를 만들 수 있다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Req</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Header header;</span><br><span class="line"><span class="keyword">private</span> T responseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Header</span></span>&#123;</span><br><span class="line"><span class="keyword">private</span> String resCode;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Spring/">Spring</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/%ED%8C%A8%EC%8A%A4%ED%8A%B8%EC%BA%A0%ED%8D%BC%EC%8A%A4-%EC%B4%88%EA%B2%A9%EC%B0%A8Java-Spring/">패스트캠퍼스(초격차Java/Spring)</category>
      
      
      <comments>https://sowon-dev.github.io/2021/08/12/210812Spring-resttemplate/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Springboot Excel파일 업로드 후 DB에 저장</title>
      <link>https://sowon-dev.github.io/2021/08/09/210810Spring-excel/</link>
      <guid>https://sowon-dev.github.io/2021/08/09/210810Spring-excel/</guid>
      <pubDate>Mon, 09 Aug 2021 20:07:29 GMT</pubDate>
      
      <description>&lt;p&gt;스프링프로젝트에서 엑셀파일을 업로드 한 뒤 각 열을 DB 컬럼과 맞춰서 저장하는 기능을 구현해보자.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>스프링프로젝트에서 엑셀파일을 업로드 한 뒤 각 열을 DB 컬럼과 맞춰서 저장하는 기능을 구현해보자.</p><a id="more"></a><h2 id="엑셀데이터-예시"><a href="#엑셀데이터-예시" class="headerlink" title="엑셀데이터 예시"></a>엑셀데이터 예시</h2><table><thead><tr><th align="center">아이디</th><th align="center">비밀번호</th><th align="center">사용자이름</th></tr></thead><tbody><tr><td align="center">sea</td><td align="center">1234</td><td align="center">김바다</td></tr><tr><td align="center">sun</td><td align="center">5678</td><td align="center">박태양</td></tr><tr><td align="center">wind</td><td align="center">1234</td><td align="center">이바람</td></tr></tbody></table><p>3행 3열로 이루어진 데이터를 DB에 넣어보려고한다.</p><p><br><br><br></p><h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><p>먼저 dependency를 추가해야한다. <a href="https://mvnrepository.com/artifact/org.apache.poi/poi-ooxml">메이븐 레포지토리 사이트</a>에서 원하는 버전과 프로젝트를 선택한다.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-ooxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="userController-java"><a href="#userController-java" class="headerlink" title="userController.java"></a>userController.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value = <span class="string">"/addExcel"</span>, method = RequestMethod.POST)</span><br><span class="line"><span class="keyword">public</span> ResponseEntity&lt;? extends BasicResponse&gt; addExcel(HttpServletRequest request,</span><br><span class="line">HttpServletResponse response, MultipartFile file) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ResponseEntity.ok().body(service.insertExcel(file));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="userService-java"><a href="#userService-java" class="headerlink" title="userService.java"></a>userService.java</h2><p>확장자 유효성 검사는 1안과 2안이 있는데 2안이 훨씬 좋다.<br>그 이유는 이름만 xls, xlsx로 바꿀 수 있기때문이다 아예 contentType이 XLSX인 것을 확인하는 것이 좋다.</p><ol><li>FilenameUtils.getExtension(file.getOriginalFilename()).toLowerCase()로 한 뒤 xlsx이나 xls이 일치하는 지 확인</li><li>file.getFile().getContentType()을 변수에 담아서 ConstContentType.XLSX과 일치하는 지 확인</li></ol><p><br><br><br>아래는 userService안의 addExcel 메서드 소스 코드이다.<br>BasicResponse클래스는 그냥 response클래스이므로 생략하고 mapper클래스도 생략한다.</p><p>로직 순서이다.</p><ol><li>파라미터에 파일이 있는지 확인 -&gt; 없으면 return 에러</li><li>확장자가 엑셀인지 확인  -&gt; 아니면 return 에러</li><li>엑셀테이터를 가져와서 각 행마다 VO객체에 저장 -&gt; list에 저장</li><li>list를 DB에 insert</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">ExcelUtil excelUtil;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> BasicResponse <span class="title">addExcel</span><span class="params">(MultipartFile file)</span> </span>&#123;</span><br><span class="line">BasicResponse res = <span class="keyword">new</span> BasicResponse();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 파일 존재하지 않는 경우</span></span><br><span class="line"><span class="keyword">if</span> (file.isEmpty()) &#123;</span><br><span class="line">res.setEmpty();</span><br><span class="line">res.setMessage(<span class="string">"Excel 파일을 선택해주세요."</span>);</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 확장자 유효성 검사 -&gt; 엑셀파일만 가능</span></span><br><span class="line"><span class="comment">//1안: tring ext = fileUtil.getExtension(file.getOriginalFilename());</span></span><br><span class="line"><span class="comment">//2안</span></span><br><span class="line">String contentType = file.getFile().getContentType();</span><br><span class="line"></span><br><span class="line"><span class="comment">//1안: if (!ext.equals("xlsx") &amp;&amp; !ext.equals("xls")) &#123;</span></span><br><span class="line"><span class="comment">//2안</span></span><br><span class="line"><span class="keyword">if</span>(!contentType.equals(ConstContentType.XLSX)) &#123;</span><br><span class="line">res.setEmpty();</span><br><span class="line">res.setMessage(<span class="string">"Excel 파일을 선택해주세요."</span>);</span><br><span class="line"><span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">List&lt;UserVO&gt; listUser = <span class="keyword">new</span> ArrayList&lt;UserVO&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 엑셀의 셀데이터를 가져와서 VO에 담기</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; listMap = excelUtil.getListData(file, <span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Map&lt;String, Object&gt; map : listMap) &#123;</span><br><span class="line">UserVO userInfo = <span class="keyword">new</span> UserVO();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 각 셀의 데이터를 VO에 set한다.</span></span><br><span class="line">userInfo.setUserId(map.get(<span class="string">"1"</span>).toString());</span><br><span class="line">userInfo.setPassword(map.get(<span class="string">"2"</span>).toString());</span><br><span class="line">userInfo.setUserName(map.get(<span class="string">"3"</span>).toString());</span><br><span class="line"></span><br><span class="line">listUser.add(userInfo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 리스트에 담은 VO를 DB에 저장</span></span><br><span class="line"><span class="keyword">for</span> (UserVO oneUser : listUser)&#123;</span><br><span class="line">userMapper.insertUser(oneUser);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>getListData(file, 1, 3)의 의미<br>엑셀파일의 1번째 행부터 3번째 열까지의 데이터를 listMap에 담는다.<br>0번째 행부터 하지 않는 이유는 보통 0번째행은 머리글행으로 제목이나 구분명칭을 작성하기 때문이다.<br>3인 이유는 엑셀데이터에 3열이 있기때문이다.<br>가지고 있는 엑셀데이터에 따라 변경하면 된다.</li></ul><p><br><br><br></p><h2 id="ExcelUtil-java"><a href="#ExcelUtil-java" class="headerlink" title="ExcelUtil.java"></a>ExcelUtil.java</h2><p>제일 중요한 엑셀유틸객체이다.</p><p>getListData 메서드의 파라미터 정의</p><ul><li>startRowNum : 시트 시작 행 번호이다. 시트 행은 0부터 시작한다.</li><li>columnLength : 시트 열의 총 개수</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ExcelUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 각 셀의 데이터타입에 맞게 값 가져오기</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getCellValue</span><span class="params">(XSSFCell cell)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">String value = <span class="string">""</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(cell == <span class="keyword">null</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (cell.getCellType()) &#123;</span><br><span class="line"><span class="keyword">case</span> STRING:</span><br><span class="line">value = cell.getStringCellValue();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> NUMERIC:</span><br><span class="line">value = (<span class="keyword">int</span>) cell.getNumericCellValue() + <span class="string">""</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 엑셀파일의 데이터 목록 가져오기 (파라미터들은 위에서 설명함)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; getListData(MultipartFile file, <span class="keyword">int</span> startRowNum, <span class="keyword">int</span> columnLength) &#123;</span><br><span class="line"></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; excelList = <span class="keyword">new</span> ArrayList&lt;Map&lt;String,Object&gt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">OPCPackage opcPackage = OPCPackage.open(file.getInputStream());</span><br><span class="line"></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"resource"</span>)</span><br><span class="line">XSSFWorkbook workbook = <span class="keyword">new</span> XSSFWorkbook(opcPackage);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 첫번째 시트</span></span><br><span class="line">XSSFSheet sheet = workbook.getSheetAt(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> rowIndex = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> columnIndex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 첫번째 행(0)은 컬럼 명이기 때문에 두번째 행(1) 부터 검색</span></span><br><span class="line"><span class="keyword">for</span> (rowIndex = startRowNum; rowIndex &lt; sheet.getLastRowNum() + <span class="number">1</span>; rowIndex++) &#123;</span><br><span class="line">XSSFRow row = sheet.getRow(rowIndex);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 빈 행은 Skip</span></span><br><span class="line"><span class="keyword">if</span> (row.getCell(<span class="number">0</span>) != <span class="keyword">null</span> &amp;&amp; !row.getCell(<span class="number">0</span>).toString().isBlank()) &#123;</span><br><span class="line"></span><br><span class="line">Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> cells = columnLength;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (columnIndex = <span class="number">0</span>; columnIndex &lt;= cells; columnIndex++) &#123;</span><br><span class="line">XSSFCell cell = row.getCell(columnIndex);</span><br><span class="line">map.put(String.valueOf(columnIndex), getCellValue(cell));</span><br><span class="line">logger.info(rowIndex + <span class="string">" 행 : "</span> + columnIndex+ <span class="string">" 열 = "</span> + getCellValue(cell));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">excelList.add(map);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">catch</span> (InvalidFormatException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> excelList;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="파일-업로드-사이즈-초과-에러"><a href="#파일-업로드-사이즈-초과-에러" class="headerlink" title="파일 업로드 사이즈 초과 에러"></a>파일 업로드 사이즈 초과 에러</h2><p>파일 사이즈를 초과해서 업로드할 수 있으므로 예외처리를 해준다.<br><code>@RestControllerAdvice</code>를 사용한 BadRequestHandler 클래스에서 예외처리를 해주었다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BadRequestHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ExceptionHandler</span>(&#123;MaxUploadSizeExceededException<span class="class">.<span class="keyword">class</span>&#125;)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">ResponseEntity</span>&lt;? <span class="keyword">extends</span> <span class="title">BasicResponse</span>&gt; <span class="title">uploadException</span>(<span class="title">MaxUploadSizeExceededException</span> <span class="title">exc</span>, </span></span><br><span class="line"><span class="class">      <span class="title">HttpServletRequest</span> <span class="title">request</span>,</span></span><br><span class="line"><span class="class">      <span class="title">HttpServletResponse</span> <span class="title">response</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ResponseEntity.status(HttpStatus.PAYLOAD_TOO_LARGE).body(<span class="keyword">new</span> ErrorResponse(String.valueOf(HttpStatus.PAYLOAD_TOO_LARGE.value()), <span class="string">"파일 사이즈를 초과하였습니다. (10MB 이하의 파일을 선택해주세요.)"</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Spring/">Spring</category>
      
      
      
      <comments>https://sowon-dev.github.io/2021/08/09/210810Spring-excel/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>STS git clone 깃허브연동하여 스프링 maven프로젝트 가져오기</title>
      <link>https://sowon-dev.github.io/2021/08/09/210810STSgitClone/</link>
      <guid>https://sowon-dev.github.io/2021/08/09/210810STSgitClone/</guid>
      <pubDate>Mon, 09 Aug 2021 19:23:00 GMT</pubDate>
      
      <description>&lt;p&gt;프로젝트 셋팅을 자주하지 않기때문에 헷갈릴 염려가 있어 아예 순서를 적어두려고 한다.&lt;br&gt;github 레포지토리의 springboot maven(메이븐)프로젝트를 가져오는 방법이다.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>프로젝트 셋팅을 자주하지 않기때문에 헷갈릴 염려가 있어 아예 순서를 적어두려고 한다.<br>github 레포지토리의 springboot maven(메이븐)프로젝트를 가져오는 방법이다.</p><a id="more"></a><h2 id="1-STS에서-Perpectives를-git으로-변경"><a href="#1-STS에서-Perpectives를-git으로-변경" class="headerlink" title="1 STS에서 Perpectives를 git으로 변경"></a>1 STS에서 Perpectives를 git으로 변경</h2><p><img src="/img/210810STSgitClone1.PNG" alt=""></p><ol><li>STS 또는 이클립스에서 Perspectives의 돋보기 아이콘을 클릭한다.</li><li>git 검색</li><li>Perpectives git 선택</li></ol><p><br><br><br></p><h2 id="2-Clone-a-Git-repository"><a href="#2-Clone-a-Git-repository" class="headerlink" title="2 Clone a Git repository"></a>2 Clone a Git repository</h2><p><img src="/img/210810STSgitClone2.PNG" alt=""></p><ol><li><code>Clone a Git repository</code> 클릭</li><li>깃헙 레포에서 복사한 clone URI를 붙여넣기한다.<br>깃헙에서 초록색 <code>Code</code>버튼을 클릭한 뒤 URI를 복사했다면 붙여넣지 않아도 자동적으로 기입된다.</li><li>NEXT를 클릭한 뒤 Clone을 원하는 브랜치를 선택한다.<br>기본값은 main 또는 master 브랜치가 체크되어 있다.<br>Tag fetching strateguy는 기본값으로 진행하나 필요에 따라 바꾸면 된다.</li><li>LocalDestination의 Directory를 선택한다.<br>저장은 원하는 곳에 설정하면 된다. 나는 보통 D 드라이브로 경로를 설정한다.</li></ol><p>이제 깃헙 연동이 끝났다!<br>잘 가져왔는 지 어떻게 확인할까?<br>아래 이미지에서 체크한 부분을 보자.</p><p><img src="/img/210810STSgitClone3.PNG" alt=""></p><p>STS의 Progress탭을 보면 클론이 진행중인 걸 확인할 수 있다.<br>프로젝트 크기에 따라 시간이 꽤 걸릴 수 있다.</p><p><br><br><br></p><h2 id="3-STS에서-Perpectives를-java로-변경"><a href="#3-STS에서-Perpectives를-java로-변경" class="headerlink" title="3 STS에서 Perpectives를 java로 변경"></a>3 STS에서 Perpectives를 java로 변경</h2><p><img src="/img/210810STSgitClone4.PNG" alt=""></p><ol><li>import projects 클릭</li><li>maven 검색</li><li>Existing Maven Projects선택</li></ol><p><img src="/img/210810STSgitClone5.PNG" alt=""></p><ol start="4"><li><p>Browe 선택 후 위에서 저장된 경로 선택<br>나는 D에 저장햇으므로 D에 있는 파일 경로를 선택했다.</p></li><li><p>pom.xml 선택 확인<br>자동적으로 pom.xml이 검색되고 체크되므로 확인한다.</p></li><li><p>finish 버튼<br>조금만 기다리면 불러오기가 완료된다!<br>끝!</p></li></ol><h2 id="gradle-프로젝트라면"><a href="#gradle-프로젝트라면" class="headerlink" title="gradle 프로젝트라면?"></a>gradle 프로젝트라면?</h2><p>1,2번은 동일하게 진행하면 되고 3번에서 maven이 아니라 gradle폴더를 선택한 후 <code>Existing Gradle Project</code>를 클릭하면 된다!<br>참 쉽죠?!</p>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Spring/">Spring</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/STS/">STS</category>
      
      
      <comments>https://sowon-dev.github.io/2021/08/09/210810STSgitClone/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[Spring]Interceptor</title>
      <link>https://sowon-dev.github.io/2021/08/09/210809Spring-interceptor/</link>
      <guid>https://sowon-dev.github.io/2021/08/09/210809Spring-interceptor/</guid>
      <pubDate>Mon, 09 Aug 2021 05:25:25 GMT</pubDate>
      
      <description>&lt;p&gt;스프링에서 인터셉터에 대해 알아보자.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>스프링에서 인터셉터에 대해 알아보자.</p><a id="more"></a><h2 id="Interceptor"><a href="#Interceptor" class="headerlink" title="Interceptor"></a>Interceptor</h2><ul><li><a href="https://sowon-dev.github.io/2021/08/06/210807Spring-filter/">Filter</a>와 매우 유사한 형태지만 차이점은 Spring Context에 등록됨.</li><li>Controller 영역 안에 존재</li><li>AOP와 유사한 기능 제공 가능</li><li>주로 <code>인증 단계</code>를 처리하는데 사용 (조직에 따라 Logging용도로 사용)</li><li>인터셉터를 선/후처리함으로써, 서비스 비즈니스 로직과 분리시킴.</li><li><code>@RequiredArgsConstructor</code>: final로 선언된 객체들을 생성자에서 주입받을 수 있도록 해줌</li></ul>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Spring/">Spring</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/%ED%8C%A8%EC%8A%A4%ED%8A%B8%EC%BA%A0%ED%8D%BC%EC%8A%A4-%EC%B4%88%EA%B2%A9%EC%B0%A8Java-Spring/">패스트캠퍼스(초격차Java/Spring)</category>
      
      
      <comments>https://sowon-dev.github.io/2021/08/09/210809Spring-interceptor/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[Spring]Filter</title>
      <link>https://sowon-dev.github.io/2021/08/06/210807Spring-filter/</link>
      <guid>https://sowon-dev.github.io/2021/08/06/210807Spring-filter/</guid>
      <pubDate>Fri, 06 Aug 2021 15:00:00 GMT</pubDate>
      
      <description>&lt;p&gt;스프링에서 필터에 대해 알아보자.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>스프링에서 필터에 대해 알아보자.</p><a id="more"></a><h2 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h2><ul><li>Filter란 웹 어플리케이션에서 관리되는 영역</li><li>스프링부트 프레임워크에서 요청/응답의 최초와 최종단계에 위치</li><li>필터를 통해 요청/응답 정보 변경 가능</li><li><strong>유일하게 ServletRequest, ServletResponse 객체를 변환할 수 있음</strong></li><li>주로 인증로직과 logging용도로 활용<ul><li>보통 실무에선 logging용도로 사용되고 <a href="https://sowon-dev.github.io/2021/08/09/210809Spring-interceptor/">intercepter</a>가 인증단계로 사용됨</li></ul></li></ul><p><br><br><br>전역 Filter설정방법과 특정 컨트롤러에만 Filter를 설정하는 방법을 예제 코드와 함께 보자.<br>차이점으로는 특정 컨트롤러 필터사용시 아래 두 어노테이션을 사용한다는 점이다.</p><ul><li><code>@ServletComponentScan</code></li><li><code>@WebFilter(&quot;/api2/user/*&quot;)</code></li></ul><p><br><br></p><h2 id="Filter-공통-코드"><a href="#Filter-공통-코드" class="headerlink" title="Filter 공통 코드"></a>Filter 공통 코드</h2><ul><li>User.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="전역-Filter-코드-예제"><a href="#전역-Filter-코드-예제" class="headerlink" title="전역 Filter 코드 예제"></a>전역 Filter 코드 예제</h2><ul><li>FilterApplication.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FilterApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(FilterApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>controller1.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/api"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApiController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@PostMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> User <span class="title">user</span><span class="params">(@RequestBody User user)</span></span>&#123;</span><br><span class="line">    log.info(<span class="string">"user1: &#123;&#125;"</span>, user);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>GlobalFilter1.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//전처리</span></span><br><span class="line">    ContentCachingRequestWrapper req = <span class="keyword">new</span> ContentCachingRequestWrapper((HttpServletRequest) request);</span><br><span class="line">    ContentCachingResponseWrapper res = <span class="keyword">new</span> ContentCachingResponseWrapper((HttpServletResponse) response);</span><br><span class="line"></span><br><span class="line">    chain.doFilter(req, res);</span><br><span class="line">    String url = req.getRequestURI();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//후처리</span></span><br><span class="line">    String reqContent = <span class="keyword">new</span> String(req.getContentAsByteArray()); <span class="comment">//default가 UTF-8</span></span><br><span class="line">    log.info(<span class="string">"respone url: &#123;&#125;, reqBody: &#123;&#125;"</span>, url, reqContent);</span><br><span class="line"></span><br><span class="line">    String resContent = <span class="keyword">new</span> String(res.getContentAsByteArray()); <span class="comment">//default가 UTF-8</span></span><br><span class="line">    log.info(<span class="string">"respone resBody: &#123;&#125;"</span>, resContent);</span><br><span class="line">    <span class="comment">// 필수: 한 번 읽었기때문에 원래대로 copy 돌려놓아야한다.</span></span><br><span class="line">    res.copyBodyToResponse();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="특정-컨트롤러-Filter-코드-예제"><a href="#특정-컨트롤러-Filter-코드-예제" class="headerlink" title="특정 컨트롤러 Filter 코드 예제"></a>특정 컨트롤러 Filter 코드 예제</h2><ul><li>FilterApplication.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@ServletComponentScan</span> <span class="comment">//2번방법용</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FilterApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">SpringApplication.run(FilterApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>controller2.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 이 컨트롤러에만 필터적용</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/api2"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Api2Controller</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@PostMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line">  <span class="function"><span class="keyword">public</span> User <span class="title">user</span><span class="params">(@RequestBody User user)</span></span>&#123;</span><br><span class="line">    log.info(<span class="string">"Api2Controller 컨트롤러에만 GlobalFilter2 필터 적용"</span>);</span><br><span class="line">    log.info(<span class="string">"user2: &#123;&#125;"</span>, user);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>GlobalFilter2.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@WebFilter</span>(<span class="string">"/api2/user/*"</span>) <span class="comment">//특정 컨트롤러에만 사용 가능하도록 설정</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalFilter2</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//전처리</span></span><br><span class="line">    ContentCachingRequestWrapper req = <span class="keyword">new</span> ContentCachingRequestWrapper((HttpServletRequest) request);</span><br><span class="line">    ContentCachingResponseWrapper res = <span class="keyword">new</span> ContentCachingResponseWrapper((HttpServletResponse) response);</span><br><span class="line"></span><br><span class="line">    chain.doFilter(req, res);</span><br><span class="line">    String url = req.getRequestURI();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//후처리</span></span><br><span class="line">    String reqContent = <span class="keyword">new</span> String(req.getContentAsByteArray()); <span class="comment">//default가 UTF-8</span></span><br><span class="line">    log.info(<span class="string">"respone url: &#123;&#125;, reqBody: &#123;&#125;"</span>, url, reqContent);</span><br><span class="line"></span><br><span class="line">    String resContent = <span class="keyword">new</span> String(res.getContentAsByteArray()); <span class="comment">//default가 UTF-8</span></span><br><span class="line">    log.info(<span class="string">"respone resBody: &#123;&#125;"</span>, resContent);</span><br><span class="line">    <span class="comment">// 필수: 한 번 읽었기때문에 원래대로 copy 돌려놓아야한다.</span></span><br><span class="line">    res.copyBodyToResponse();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Spring/">Spring</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/%ED%8C%A8%EC%8A%A4%ED%8A%B8%EC%BA%A0%ED%8D%BC%EC%8A%A4-%EC%B4%88%EA%B2%A9%EC%B0%A8Java-Spring/">패스트캠퍼스(초격차Java/Spring)</category>
      
      
      <comments>https://sowon-dev.github.io/2021/08/06/210807Spring-filter/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>delete mapper에서 여러 테이블의 데이터 한꺼번에 삭제 오류</title>
      <link>https://sowon-dev.github.io/2021/08/04/210805MyBatis-multiqueries/</link>
      <guid>https://sowon-dev.github.io/2021/08/04/210805MyBatis-multiqueries/</guid>
      <pubDate>Wed, 04 Aug 2021 21:17:49 GMT</pubDate>
      
      <description>&lt;p&gt;개인정보와 같은 경우 회원 탈퇴를 할때 여러 테이블에 있는 해당 사용자 정보를 전부 다 삭제해야한다.&lt;br&gt;이를 한꺼번에 아래 코드처럼 처리할 수 있다.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>개인정보와 같은 경우 회원 탈퇴를 할때 여러 테이블에 있는 해당 사용자 정보를 전부 다 삭제해야한다.<br>이를 한꺼번에 아래 코드처럼 처리할 수 있다.</p><a id="more"></a><h2 id="다중쿼리"><a href="#다중쿼리" class="headerlink" title="다중쿼리"></a>다중쿼리</h2><p>아래는 user id를 가지고 userinfo테이블, payment테이블, authority테이블, board테이블, 총 4개의 테이블에서 해당 유저정보를 삭제하는 다중쿼리이다.</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;delete id=<span class="string">"deletePersonalData"</span> parameterType=<span class="string">"String"</span>&gt;</span><br><span class="line">DELETE FROM userinfo</span><br><span class="line"> WHERE user_id = #&#123;userId&#125;;</span><br><span class="line"></span><br><span class="line">DELETE FROM payment</span><br><span class="line"> WHERE user_id = #&#123;userId&#125;;</span><br><span class="line"></span><br><span class="line">DELETE FROM authority</span><br><span class="line"> WHERE user_id = #&#123;userId&#125;;</span><br><span class="line"></span><br><span class="line">DELETE FROM board</span><br><span class="line"> WHERE user_id = #&#123;userId&#125;;</span><br><span class="line">&lt;/delete&gt;</span><br></pre></td></tr></table></figure><p>delete메서드이다보니 조심스럽게 run을 돌렸는데 syntax에러가 나타났다!</p><p><img src="/img/210805MyBatis-multiqueries.PNG" alt=""></p><p>해당 쿼리를 전혀 읽지 못하고 있었다.<br>구글링으로 엄청 삽질하다가 과장님께 물어보니 멀티 쿼리 허용했는 지를 물어보셨다<br>내 대답은 아뇨…였다.</p><p>과장님 감사합니다🙏</p><p><br><br><br></p><h2 id="멀티쿼리-허용하기"><a href="#멀티쿼리-허용하기" class="headerlink" title="멀티쿼리 허용하기"></a>멀티쿼리 허용하기</h2><p><code>application.properties</code>에 기재되어있는 DB주소 정보 뒤에 멀티쿼리를 설정해줘야한다!</p><ul><li><code>allowMultiQueries=true</code></li></ul><p>아래는 코드 예시이다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jdbc:log4jdbc:mariadb:<span class="comment">//DB서버IP주소/DatabaseName?allowMultiQueries=true</span></span><br></pre></td></tr></table></figure><p>설정해야지만 쓸 수 있는 것이 다중쿼리이다!<br>까먹지말고 DB주소 뒤에 설정하자!</p>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Database/">Database</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/MyBatis/">MyBatis</category>
      
      
      <comments>https://sowon-dev.github.io/2021/08/04/210805MyBatis-multiqueries/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[Spring]@Transactional 쓰는 이유</title>
      <link>https://sowon-dev.github.io/2021/08/04/210805Spring-Transactional/</link>
      <guid>https://sowon-dev.github.io/2021/08/04/210805Spring-Transactional/</guid>
      <pubDate>Wed, 04 Aug 2021 20:05:51 GMT</pubDate>
      
      <description>&lt;p&gt;세상에 이렇게 재밌는 일이 또 있을까?&lt;br&gt;습관처럼 쓰던 것들이 왜 써야하는 지 알게될 때의 그 재미.&lt;br&gt;정말 겪어 본 사람만 안다.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>세상에 이렇게 재밌는 일이 또 있을까?<br>습관처럼 쓰던 것들이 왜 써야하는 지 알게될 때의 그 재미.<br>정말 겪어 본 사람만 안다.</p><a id="more"></a><h2 id="이럴때-있으시죠"><a href="#이럴때-있으시죠" class="headerlink" title="이럴때 있으시죠?"></a>이럴때 있으시죠?</h2><p>Service에서 mapper로 여러 SQL쿼리를 처리할 때 그 중 하나가 오류가 난 경우 그 전에 실행되었던 SQL 쿼리들이 다 롤백되어야한다.<br>이를 트랜잭션 처리라고 부른다.<br>트랜잭션 처리는 SQL에서 할 수도 있고 Spring에서 할수도 있다.</p><p><br><br><br></p><h2 id="Spring에서-트랜잭션을-설정하는-2가지-방법"><a href="#Spring에서-트랜잭션을-설정하는-2가지-방법" class="headerlink" title="Spring에서 트랜잭션을 설정하는 2가지 방법"></a>Spring에서 트랜잭션을 설정하는 2가지 방법</h2><ol><li>xml파일에서 AOP + tx:advice 태그 활용</li><li>어노테이션 @Transactional</li></ol><p>트랜잭션처리를 하면 transaction begin, commit을 자동 수행해준다. 만약 예외가 생겼다면 rollback 처리를 자동 수행해준다.<br>정말 간편!</p><p><br><br><br></p><h2 id="Springboot에서-Transactional-설정"><a href="#Springboot에서-Transactional-설정" class="headerlink" title="Springboot에서 @Transactional 설정"></a>Springboot에서 @Transactional 설정</h2><p>어노테이션은 클래스뿐만 아니라 인터페이스, 클래스 내 메서드위에도 붙일 수 있다.<br>세상 간편!</p><p>주로 아래 에시코드처럼 서비스 클래스 위에 붙여준다.<br>이걸로 설정 끝!</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span>(rollbackFor = Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertUser</span><span class="params">(UserDTO user)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    <span class="comment">// 비즈니스 로직</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 기타 메서드</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>위 예시 코드의 rollbackFor속성외에도 @Transactional에는 다양한 속성이 있다. <a href="https://www.hanumoka.net/2018/09/11/spring-20180911-spring-Transactional/">하누모카님의 @Transactional 포스팅</a>에 알기 쉽게 적혀있다. 꼭 읽어보자!</p><p>그리고 rollbackFor 속성을 꼭 붙여줘야하는 이유는 <a href="https://velog.io/@kdhyo/JavaTransactional-Annotation-%EC%95%8C%EA%B3%A0-%EC%93%B0%EC%9E%90-26her30h">kdhyo님의 @Transactional Annotation 알고 쓰자 포스팅</a>에 정말 자세하게 나와있으니 꼭 읽어보자. 정말 좋은 글이다.</p><p><br><br><br></p><h2 id="요약"><a href="#요약" class="headerlink" title="요약"></a>요약</h2><p>요약하자면 @Transactional은 기본적으로 Unchecked Exception, Error를 rollback한다.<br>try catch로 명시해준 에러인 경우 Checked Exception이기 때문에 트랜잭션이 일어나지 않을 수 있다.<br>따라서 <code>rollbackFor = Exception.class</code>속성을 통해서 Unchecked Exception, Error뿐만 아니라 checked Exception도 트랜잭션 처리를 가능하게할 수 있다!</p>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Spring/">Spring</category>
      
      
      
      <comments>https://sowon-dev.github.io/2021/08/04/210805Spring-Transactional/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[Spring]Springboot Exception처리</title>
      <link>https://sowon-dev.github.io/2021/08/03/210804springbootError/</link>
      <guid>https://sowon-dev.github.io/2021/08/03/210804springbootError/</guid>
      <pubDate>Tue, 03 Aug 2021 21:35:42 GMT</pubDate>
      
      <description>&lt;h2 id=&quot;예외처리-어노테이션&quot;&gt;&lt;a href=&quot;#예외처리-어노테이션&quot; class=&quot;headerlink&quot; title=&quot;예외처리 어노테이션&quot;&gt;&lt;/a&gt;예외처리 어노테이션&lt;/h2&gt;</description>
      
      
      
      <content:encoded><![CDATA[<h2 id="예외처리-어노테이션"><a href="#예외처리-어노테이션" class="headerlink" title="예외처리 어노테이션"></a>예외처리 어노테이션</h2><a id="more"></a><ul><li><code>@ControllerAdvice</code>: 글로벌 예외처리 및 특정 package/controller 예외처리<ul><li>속성 basePackageClasses</li></ul></li><li><code>@ExceptionHandler</code>: 특정 controller예외처리</li></ul><p>Exceprion이 발생했을 때 어떤 부분의 예외인지 그 이름을 알고 싶을때 Exception클래스 내 <code>e.getClass().getName()</code>메서드를 사용할 수 있다.</p><p><br><br><br></p><h2 id="다른-개발자가-봐도-알기쉽도록-메시지를-꾸며보자"><a href="#다른-개발자가-봐도-알기쉽도록-메시지를-꾸며보자" class="headerlink" title="다른 개발자가 봐도 알기쉽도록 메시지를 꾸며보자"></a>다른 개발자가 봐도 알기쉽도록 메시지를 꾸며보자</h2><ul><li>ErrorResponse.java<br>한 파라미터에 조건이 여러 개가 있을 수 있으므로 List로 에러필드와 에러메시지를 받을 필요가 있다.</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorResponse</span> </span>&#123;</span><br><span class="line">String statusCode;</span><br><span class="line">    String requestUrl;</span><br><span class="line">    String code;</span><br><span class="line">    String message;</span><br><span class="line">    String resultCode;</span><br><span class="line"></span><br><span class="line">    List&lt;Error&gt; errorList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Error.java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Error</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> String field; <span class="comment">//파라미터명</span></span><br><span class="line"><span class="keyword">private</span> String message; <span class="comment">//오류메시지</span></span><br><span class="line"><span class="keyword">private</span> String invalidValue; <span class="comment">//입력한 값</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>이제 제일 중요한 컨트롤러 부분을 보자.</p><ul><li>ApiControllerAdvice.java<br>String으로 각각 에러값을 받은 다음 위에서 선언한 Error클래스에 set해준 뒤 list에 add해준다.<br>각 예외클래스마다 사용할 수 있는 것들이 다르니 디버그나 공식문서를 통해서 원하는 내용을 찾으면 된다!</li></ul><p>아래 예시는 가장 기본이 되는 방식</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 다른 컨트롤러들말고 오로지 ApiController에서만 사용하고싶을때 basePackageClasses속성을 사용한다</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span>(basePackageClasses = ApiController<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class"><span class="title">public</span> <span class="title">class</span> <span class="title">ApiControllerAdvice</span> </span>&#123;</span><br><span class="line"> <span class="meta">@ExceptionHandler</span>(value = MethodArgumentNotValidException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">ResponseEntity</span> <span class="title">methodArgumentNotValidException</span>(<span class="title">MethodArgumentNotValidException</span> <span class="title">e</span>, <span class="title">HttpServletRequest</span> <span class="title">httpServletRequest</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Error&gt; errorList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        BindingResult bindingResult = e.getBindingResult();</span><br><span class="line">        bindingResult.getAllErrors().forEach(error -&gt; &#123;</span><br><span class="line">            FieldError field = (FieldError) error;</span><br><span class="line"></span><br><span class="line">            String fieldName = field.getField();</span><br><span class="line">            String message = field.getDefaultMessage();</span><br><span class="line">            String value = field.getRejectedValue().toString();</span><br><span class="line">            </span><br><span class="line">            Error errorMessage = <span class="keyword">new</span> Error();</span><br><span class="line">            errorMessage.setField(fieldName);</span><br><span class="line">            errorMessage.setMessage(message);</span><br><span class="line">            errorMessage.setInvalidValue(value);</span><br><span class="line"></span><br><span class="line">            errorList.add(errorMessage);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        ErrorResponse errorResponse = <span class="keyword">new</span> ErrorResponse();</span><br><span class="line">        errorResponse.setErrorList(errorList);</span><br><span class="line">        errorResponse.setMessage(<span class="string">""</span>);</span><br><span class="line">        errorResponse.setRequestUrl(httpServletRequest.getRequestURI()); <span class="comment">//현재 api주소 </span></span><br><span class="line">        errorResponse.setStatusCode(HttpStatus.BAD_REQUEST.toString());</span><br><span class="line">        errorResponse.setResultCode(<span class="string">"FAIL"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST).body(errorResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(value = ConstraintViolationException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">ResponseEntity</span> <span class="title">constraintViolationException</span>(<span class="title">ConstraintViolationException</span> <span class="title">e</span>, <span class="title">HttpServletRequest</span> <span class="title">httpServletRequest</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Error&gt; errorList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        e.getConstraintViolations().forEach(error -&gt;&#123;</span><br><span class="line">            Stream&lt;Path.Node&gt; stream = StreamSupport.stream(error.getPropertyPath().spliterator(), <span class="keyword">false</span>);</span><br><span class="line">            List&lt;Path.Node&gt; list = stream.collect(Collectors.toList());</span><br><span class="line"></span><br><span class="line">            String field = list.get(list.size() -<span class="number">1</span>).getName();</span><br><span class="line">            String message = error.getMessage();</span><br><span class="line">            String invalidValue = error.getInvalidValue().toString();</span><br><span class="line"></span><br><span class="line">            Error errorMessage = <span class="keyword">new</span> Error();</span><br><span class="line">            errorMessage.setField(field);</span><br><span class="line">            errorMessage.setMessage(message);</span><br><span class="line">            errorMessage.setInvalidValue(invalidValue);</span><br><span class="line"></span><br><span class="line">            errorList.add(errorMessage);</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        ErrorResponse errorResponse = <span class="keyword">new</span> ErrorResponse();</span><br><span class="line">        errorResponse.setErrorList(errorList);</span><br><span class="line">        errorResponse.setMessage(<span class="string">""</span>);</span><br><span class="line">        errorResponse.setRequestUrl(httpServletRequest.getRequestURI()); <span class="comment">//현재 api주소 </span></span><br><span class="line">        errorResponse.setStatusCode(HttpStatus.BAD_REQUEST.toString());</span><br><span class="line">        errorResponse.setResultCode(<span class="string">"FAIL"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST).body(errorResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(value = MissingServletRequestParameterException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">ResponseEntity</span> <span class="title">missingServletRequestParameterException</span>(<span class="title">MissingServletRequestParameterException</span> <span class="title">e</span>, <span class="title">HttpServletRequest</span> <span class="title">httpServletRequest</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Error&gt; errorList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        String fieldName = e.getParameterName();</span><br><span class="line">        String invalidValue = e.getMessage();</span><br><span class="line"></span><br><span class="line">        Error errorMessage = <span class="keyword">new</span> Error();</span><br><span class="line">        errorMessage.setField(fieldName);</span><br><span class="line">        errorMessage.setMessage(e.getMessage());</span><br><span class="line"></span><br><span class="line">        ErrorResponse errorResponse = <span class="keyword">new</span> ErrorResponse();</span><br><span class="line">        errorResponse.setErrorList(errorList);</span><br><span class="line">        errorResponse.setMessage(<span class="string">""</span>);</span><br><span class="line">        errorResponse.setRequestUrl(httpServletRequest.getRequestURI());</span><br><span class="line">        errorResponse.setStatusCode(HttpStatus.BAD_REQUEST.toString());</span><br><span class="line">        errorResponse.setResultCode(<span class="string">"FAIL"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ResponseEntity.status(HttpStatus.BAD_REQUEST).body(errorResponse);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="결과"><a href="#결과" class="headerlink" title="결과"></a>결과</h2><p>만약 valid 설정을 아래와 같이 했다면 예외 메시지는 어떻게 나올까?</p><ul><li><p>User.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NotEmpty</span> <span class="meta">@Size</span>(min=<span class="number">1</span>, max=<span class="number">10</span>)</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Min</span>(<span class="number">1</span>) <span class="meta">@NotNull</span></span><br><span class="line"><span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ApiController.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/api/user"</span>)</span><br><span class="line"><span class="meta">@Validated</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApiController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@PostMapping</span>(<span class="string">""</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> User <span class="title">post</span><span class="params">(@Valid @RequestBody User user)</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"@ post call"</span>);</span><br><span class="line"><span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>위처럼 유효성체크를 설정한 뒤 POST맨을 통한 결과를 알아보자.<br>name에 빈값을 넣었고, age에는 0을 넣었다.</p><p><img src="/img/210805SpringbootError.PNG" alt=""></p><p>사진처럼 다른 개발자가 보아도 이해하기 쉬운 에러메시지를 확인할 수 있다.</p><p><br><br><br></p><h2 id="출처"><a href="#출처" class="headerlink" title="출처"></a>출처</h2><ul><li><a href="https://github.com/steve-developer/fastcampus-springboot-introduction/tree/master/06.%20%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%98%20%EA%B8%B0%EB%8A%A5%EC%9D%84%20%ED%99%9C%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90/SourceCode/exception">https://github.com/steve-developer/fastcampus-springboot-introduction/tree/master/06.%20%EC%8A%A4%ED%94%84%EB%A7%81%EC%9D%98%20%EA%B8%B0%EB%8A%A5%EC%9D%84%20%ED%99%9C%EC%9A%A9%ED%95%B4%EB%B3%B4%EC%9E%90/SourceCode/exception</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Spring/">Spring</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/%ED%8C%A8%EC%8A%A4%ED%8A%B8%EC%BA%A0%ED%8D%BC%EC%8A%A4-%EC%B4%88%EA%B2%A9%EC%B0%A8Java-Spring/">패스트캠퍼스(초격차Java/Spring)</category>
      
      
      <comments>https://sowon-dev.github.io/2021/08/03/210804springbootError/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>@의 의미와 ROWNUM으로 활용하기</title>
      <link>https://sowon-dev.github.io/2021/08/03/210804rownum/</link>
      <guid>https://sowon-dev.github.io/2021/08/03/210804rownum/</guid>
      <pubDate>Tue, 03 Aug 2021 19:30:55 GMT</pubDate>
      
      <description>&lt;p&gt;MySql에서 사용하는 @의 의미는 무엇일까? 사용자 정의 변수이다.&lt;br&gt;게시판 글번호 매기는 기능은 화면에서 할 수 있지만 MySQL에서도 할 수 있다.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>MySql에서 사용하는 @의 의미는 무엇일까? 사용자 정의 변수이다.<br>게시판 글번호 매기는 기능은 화면에서 할 수 있지만 MySQL에서도 할 수 있다.</p><a id="more"></a><h2 id="사용자-정의-변수"><a href="#사용자-정의-변수" class="headerlink" title="사용자 정의 변수"></a>사용자 정의 변수</h2><p>접두사 <code>@</code>는 사용자정의함수를 의미한다.<br>아래처럼 변수를 초기화할 수 있고 초기화시 NULL값이 할당된다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//변수 abc 선언</span></span><br><span class="line">SELECT <span class="meta">@abc</span>;</span><br></pre></td></tr></table></figure><p>MySQL은 NULL을 리턴한다.<br>사용자 정의 변수는 하나의 커넥션상에서 공유되기때문에 변수를 사용하고 초기화하지않으면 다른 쿼리 결과에 영향을 미칠 수 있다.<br>따라서 사용자 정의 변수 사용시 변수값을 항상 초기화해줘야한다. </p><p><br><br><br></p><h2 id="사용자-정의-변수-초기화"><a href="#사용자-정의-변수-초기화" class="headerlink" title="사용자 정의 변수 초기화"></a>사용자 정의 변수 초기화</h2><p>사용자 정의 변수에 할당할 수 있는 데이터 타입은 5가지이다.<br>별도의 타입을 지정하는 것은 아니고 스크립트언어처럼 저장하는 값에 의해 타입이 정해진다. </p><ol><li>문자열</li><li>정수</li><li>십진수</li><li>부동 소수점</li><li>NULL</li></ol><p>사용자 정의 변수 초기화 방법에는 3가지가 있다.</p><ol><li>SET 이용</li><li>SELECT 이용 + FROM절에서 초기화</li><li>SELECT 이용 + WHERE절에서 초기화</li></ol><p>이때 명령문 2가지를 사용할 수 있는데 두 명령문은 동일하다.</p><ol><li>SET이용시 <code>@변수명=값</code> 또는 <code>@변수명:=값</code></li><li>SELECT이용시 <code>@변수명:=값</code></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. SET이용하여 변수 abc 초기화</span></span><br><span class="line">SET <span class="meta">@abc</span>=<span class="number">77</span>; </span><br><span class="line">SET <span class="meta">@abc</span>:=<span class="number">77</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// set한 변수 사용 예시</span></span><br><span class="line">SELECT <span class="meta">@abc</span> as <span class="string">'순번'</span></span><br><span class="line">FROM example;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2. SELECT이용 + FROM절에서 변수 abc를 77로 초기화 후 10씩 증가</span></span><br><span class="line">SELECT <span class="meta">@abc</span>:=<span class="meta">@abc</span>+<span class="number">10</span></span><br><span class="line">FROM   example t1, (SELECT <span class="meta">@abc</span>:=<span class="number">77</span>) t2;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 3. SELECT 이용 + WHERE절에서 변수 abc를 77로 초기화 후 10씩 증가</span></span><br><span class="line">SELECT <span class="meta">@abc</span>:=<span class="meta">@abc</span>+<span class="number">10</span></span><br><span class="line">FROM   example t1</span><br><span class="line">WHERE  (<span class="meta">@abc</span>:=<span class="number">77</span>) = <span class="number">77</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 결과</span></span><br><span class="line"><span class="number">87</span></span><br><span class="line"><span class="number">97</span></span><br><span class="line"><span class="number">107</span></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="ROWNUM-사용"><a href="#ROWNUM-사용" class="headerlink" title="ROWNUM 사용"></a>ROWNUM 사용</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// FROM절에서 초기화</span></span><br><span class="line">SELECT <span class="meta">@rowNum</span>:=<span class="meta">@rowNum</span>+<span class="number">1</span>  as <span class="string">'순번'</span></span><br><span class="line">FROM   example t1, (SELECT <span class="meta">@rowNum</span>:=<span class="number">0</span>) t2;</span><br></pre></td></tr></table></figure><p>실제로 내가 업무에서 사용하고 있는 방식은 WHERE절에서 초기화하는 방식이다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// WHERE절에서 초기화</span></span><br><span class="line">SELECT <span class="meta">@rowNum</span>:=<span class="meta">@rowNum</span>+<span class="number">1</span> as <span class="string">'순번'</span></span><br><span class="line">FROM   example</span><br><span class="line">WHERE (<span class="meta">@rowNum</span>:=<span class="number">0</span>) = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>추가로 역순으로 나타내고 싶을 때 사용할 수 있는 방법이 있다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 역순 정렬</span></span><br><span class="line">SELECT A.no as <span class="string">'순번'</span></span><br><span class="line">FROM (</span><br><span class="line">   SELECT <span class="meta">@rowNum</span> := <span class="meta">@rowNum</span> + <span class="number">1</span> AS 순번</span><br><span class="line">   FROM   example t1, (SELECT <span class="meta">@rowNum</span>:=<span class="number">0</span>) t2;</span><br><span class="line">     ) A</span><br><span class="line">ORDER BY 순번 DESC</span><br></pre></td></tr></table></figure><p>여기서 하나 의문점은 select절 별칭부분에 따옴표를 넣어 <code>as &#39;순번&#39;</code>을 사용하고 <code>order by &#39;순번&#39; desc</code>를 한다면 정렬이 되지 않는 다.<br>여러 테스트를 해본 결과 DBtool이 아닌 MariaDB문제인 것 같다.<br>왜 <code>순번</code>은 되고 <code>&#39;순번&#39;</code>은 안될까?<br>구글링해도 뚜렷한 답이 나오지 않아 issue를 보내려고 했으나 <a href="https://github.com/MariaDB/server">레포에 issue창은 없고 PR창만 있어서</a> 기여는 다음에 언젠가 하는 걸로….</p><p><br><br><br></p><h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul><li><a href="https://three-pleasure.tistory.com/256">https://three-pleasure.tistory.com/256</a></li><li><a href="https://wakestand.tistory.com/556">https://wakestand.tistory.com/556</a></li><li><a href="https://dev.mysql.com/doc/refman/8.0/en/user-variables.html">https://dev.mysql.com/doc/refman/8.0/en/user-variables.html</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Database/">Database</category>
      
      <category domain="https://sowon-dev.github.io/categories/Database/MySQL/">MySQL</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/MariaDB/">MariaDB</category>
      
      
      <comments>https://sowon-dev.github.io/2021/08/03/210804rownum/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Springboot validation annotation parttern 정규식 오류 해결</title>
      <link>https://sowon-dev.github.io/2021/08/01/210802Pattern-regexp/</link>
      <guid>https://sowon-dev.github.io/2021/08/01/210802Pattern-regexp/</guid>
      <pubDate>Sun, 01 Aug 2021 17:48:46 GMT</pubDate>
      
      <description>&lt;p&gt;Spring 프로젝트에서 서비스단에서 처리하는 유효성체크를 VO에서 처리하고 싶었다.&lt;br&gt;내가 원하는 바는 String depart컬럼에 null은 허용하지만 빈값과 white space는 허용하지 않는 유효성체크를 하고 싶었다.&lt;br&gt;만약 빈값과 white space가 들어온다면 null로 변경해서 DB에 저장해야하는 로직이었다.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>Spring 프로젝트에서 서비스단에서 처리하는 유효성체크를 VO에서 처리하고 싶었다.<br>내가 원하는 바는 String depart컬럼에 null은 허용하지만 빈값과 white space는 허용하지 않는 유효성체크를 하고 싶었다.<br>만약 빈값과 white space가 들어온다면 null로 변경해서 DB에 저장해야하는 로직이었다.</p><a id="more"></a><h2 id="기본-어노테이션들"><a href="#기본-어노테이션들" class="headerlink" title="기본 어노테이션들"></a>기본 어노테이션들</h2><p>NULL체크를 위해 기본으로 제공되는 어노테이션들이 있다.</p><table><thead><tr><th align="center"></th><th align="center">NULL</th><th align="center">빈칸(“”)</th><th align="center">White Space(“ “)</th></tr></thead><tbody><tr><td align="center"><code>@NotNull</code></td><td align="center">허용X</td><td align="center">허용O</td><td align="center">허용O</td></tr><tr><td align="center"><code>@NotEmpty</code></td><td align="center">허용X</td><td align="center">허용X</td><td align="center">허용O</td></tr><tr><td align="center"><code>@NotBlank</code></td><td align="center">허용X</td><td align="center">허용X</td><td align="center">허용X</td></tr></tbody></table><p>내 경우는 NULL은 허용해주어야했기에 위의 어노테이션들을 전부 사용할 수 없었다.</p><p><br><br><br></p><h2 id="기존코드"><a href="#기존코드" class="headerlink" title="기존코드"></a>기존코드</h2><ul><li>VO코드</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">exampleVO</span></span>&#123;</span><br><span class="line">String depart;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>SERVICE 클래스의 checkVal메서드<br>서비스에서 null은 허용되면서도 isBlank가 참인 조건으로 만들었다. 정상작동하지만 마음에 들지 않았다.</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">checkVal</span><span class="params">(String depart)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(exampleVO.getDepart() != <span class="keyword">null</span> &amp;&amp; exampleVO.getDepart().isBlank()) &#123;</span><br><span class="line">  exampleVO.setDepart(<span class="keyword">null</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//비즈니스 로직</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="정규표현식-코드"><a href="#정규표현식-코드" class="headerlink" title="정규표현식 코드"></a>정규표현식 코드</h2><p><a href="https://regexr.com/">정규식 테스트 사이트</a>를 이용하여 원하는 정규식인 <code>[0-9a-zA-Z가-힣]</code>를 만들었다.<br>혹시 정규표현식이 처음이라면 <a href="https://sowon-dev.github.io/2021/03/16/210317pythonRegularExpression/">정규표현식 기초 포스팅</a>을 참고하자</p><p>내가 만든 정규식 <code>[0-9a-zA-Z가-힣]</code>은 아래와 같이 처리한다.</p><ul><li>허용: 숫자와 영대소문자, 한글, NULL</li><li>허용하지않음: 빈칸, 공백 </li></ul><p><br><br><br></p><h3 id="첫시도-gt-실패"><a href="#첫시도-gt-실패" class="headerlink" title="첫시도 =&gt; 실패"></a>첫시도 =&gt; 실패</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">exampleVO</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Pattern</span>(groups = &#123;ValidationGroups.insert<span class="class">.<span class="keyword">class</span>, <span class="title">ValidationGroups</span>.<span class="title">update</span>.<span class="title">class</span>&#125;</span></span><br><span class="line"><span class="class">, <span class="title">regexp</span> </span>= <span class="string">"[0-9a-zA-Z가-힣]"</span>, message = <span class="string">"빈값이나 공백이 들어갈 수 없습니다."</span>)</span><br><span class="line">String depart;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>포스트맨을 통해서 아래와 같이 테스트를 해봤는데 문자열을 입력할때 <code>&quot;빈값이나 공백이 들어갈 수 없습니다.&quot;</code>가 응답되면서 에러가 발생했다.</p><table><thead><tr><th align="center">파라미터</th><th align="center">정상작동여부</th><th align="center">설명</th></tr></thead><tbody><tr><td align="center">null</td><td align="center">O</td><td align="center">DB에 null값이 정상적으로 insert, update됨</td></tr><tr><td align="center">빈값(“”)</td><td align="center">O</td><td align="center">@Pattern message속성에 걸어둔 메시지가 출력됨</td></tr><tr><td align="center">white space(“ “)</td><td align="center">O</td><td align="center">@Pattern message속성에 걸어둔 메시지가 출력됨</td></tr><tr><td align="center">숫자,영대소문자,한글이 포함된 문자열</td><td align="center">X</td><td align="center">@Pattern message속성에 걸어둔 메시지가 출력됨</td></tr></tbody></table><p>도대체 왜일까? 에러를 이해하지못해서 삽질하고 있었는데 과장님이 간단하게 해결해주셨다.<br>과장님 감사합니다.🙏</p><p><br><br><br></p><h3 id="성공코드"><a href="#성공코드" class="headerlink" title="성공코드"></a>성공코드</h3><p>글자수<code>{0,64}</code>만 추가하면 된다!!</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">exampleVO</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Pattern</span>(groups = &#123;ValidationGroups.insert<span class="class">.<span class="keyword">class</span>, <span class="title">ValidationGroups</span>.<span class="title">update</span>.<span class="title">class</span>&#125;</span></span><br><span class="line"><span class="class">, <span class="title">regexp</span> </span>= <span class="string">"[0-9a-zA-Z가-힣]&#123;0,64&#125;"</span>, message = <span class="string">"빈값이나 공백이 들어갈 수 없습니다."</span>)</span><br><span class="line">String depart;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">파라미터</th><th align="center">정상작동여부</th><th align="center">설명</th></tr></thead><tbody><tr><td align="center">null</td><td align="center">O</td><td align="center">DB에 null값이 정상적으로 DB에 insert, update됨</td></tr><tr><td align="center">빈값(“”)</td><td align="center">O</td><td align="center">@Pattern message속성에 걸어둔 메시지가 출력됨</td></tr><tr><td align="center">white space(“ “)</td><td align="center">O</td><td align="center">@Pattern message속성에 걸어둔 메시지가 출력됨</td></tr><tr><td align="center">숫자,영대소문자,한글이 포함된 문자열</td><td align="center">O</td><td align="center">문자열값이 정상적으로 DB에 insert, update됨</td></tr></tbody></table><p>세상 간단한 에러였는데 내 눈에는 보이지 않는 것이 참 이상했다.<br>앞으로는 절대 빼먹을 일 없겠다! 과장님 다시한번 감사합니다!</p><p>여담이지만 사실 이렇게 사소한 오류일지를 적어야할지 고민이 많았다.<br>하지만 사소한 것일수록 남겨놔야 나중에 시간을 단축시킬 수 있고, 또 누군가는 나처럼 삽질할 수 도 있으니 단 한 명에게라도 도움을 줄수있다면 아주 사소한 오류일지라도 적여야겠다는 생각이 들었다.<br>주니어개발자 여러분 우리 모두 화이팅합시다.</p>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Spring/">Spring</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/%EC%98%A4%EB%A5%98%EC%9D%BC%EC%A7%80/">오류일지</category>
      
      <category domain="https://sowon-dev.github.io/tags/%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D/">정규표현식</category>
      
      
      <comments>https://sowon-dev.github.io/2021/08/01/210802Pattern-regexp/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[Spring]validation라이브러리, 커스텀 validation annotation만들기</title>
      <link>https://sowon-dev.github.io/2021/08/01/210802Spring-Validation/</link>
      <guid>https://sowon-dev.github.io/2021/08/01/210802Spring-Validation/</guid>
      <pubDate>Sun, 01 Aug 2021 15:00:00 GMT</pubDate>
      
      <description>&lt;p&gt;일반적으로 validation을 진행할 때 아래와 같이 서비스단에서 null값을 체크해준다.&lt;br&gt;파라미터가 3개이상인 경우나 여러 상황에서 한계점이 존재한다.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>일반적으로 validation을 진행할 때 아래와 같이 서비스단에서 null값을 체크해준다.<br>파라미터가 3개이상인 경우나 여러 상황에서 한계점이 존재한다.</p><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">example</span><span class="params">(String 파람<span class="number">1</span>, String 파람<span class="number">2</span>, <span class="keyword">int</span> 파람<span class="number">3</span>)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(파람<span class="number">1</span> == <span class="keyword">null</span> || 파람<span class="number">2</span> == <span class="keyword">null</span>)&#123;</span><br><span class="line"> <span class="keyword">return</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(파람<span class="number">3</span> == <span class="number">0</span>)&#123;</span><br><span class="line"> <span class="keyword">return</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 비즈니스 로직시작</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="예상할-수-있는-한계점"><a href="#예상할-수-있는-한계점" class="headerlink" title="예상할 수 있는 한계점"></a>예상할 수 있는 한계점</h2><ol><li>검증해야 할 파라미터가 많은 경우 코드가 길어짐</li><li>구현에 따라 Service Logic과 분리가 필요할 수 있음</li><li>흩어져 있는 경우 어디에서 검증하는 지 알기 어려움</li><li>재사용의 한계 존재</li></ol><p>이럴때는 spring-boot-starter-validation 라이브러리를 사용할 수 있다.<br><img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbiYEHh%2FbtqHscMte8C%2FZhCLLxW0FrI5rUYnrVfK7K%2Fimg.png" alt="출처: https://prinha.tistory.com/entry/%EC%9E%90%EB%B0%94-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98-annotation%EC%9D%98-%EC%A0%95%EC%9D%98%EC%99%80-%EC%A2%85%EB%A5%98"></p><p><a href="https://prinha.tistory.com/entry/%EC%9E%90%EB%B0%94-%EC%8A%A4%ED%94%84%EB%A7%81-%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98-annotation%EC%9D%98-%EC%A0%95%EC%9D%98%EC%99%80-%EC%A2%85%EB%A5%98">끄적끄적님의 어노테이션 포스팅</a>에 자세한 설명과 예시가 나와있다.</p><p><br><br><br></p><h2 id="BindingResult객체"><a href="#BindingResult객체" class="headerlink" title="BindingResult객체"></a>BindingResult객체</h2><p>해당 객체를 통해 예외처리 가능하다.</p><ul><li>참고: <a href="https://jhparkkk.tistory.com/12">https://jhparkkk.tistory.com/12</a></li></ul><p><br><br><br></p><h2 id="validation-커스텀-어노테이션-만들기"><a href="#validation-커스텀-어노테이션-만들기" class="headerlink" title="validation 커스텀 어노테이션 만들기"></a>validation 커스텀 어노테이션 만들기</h2><p>YearMonth형태가 yyyyMM형태인 어노테이션을 만들어보자.</p><br>1. Annotation 클래스 생성하기new Annotation을 생성하고 아래처럼 작성하면 된다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Constraint</span>(validatedBy =&#123; YearMonthValidator<span class="class">.<span class="keyword">class</span> &#125;) // 어떠한 클래스를 가지고 유효성 검사를 할 것인지 작성해야함</span></span><br><span class="line"><span class="class">@<span class="title">Target</span>(</span>&#123;METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER, TYPE_USE&#125;)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> YearMonth &#123;</span><br><span class="line"></span><br><span class="line">  <span class="function">String <span class="title">message</span><span class="params">()</span> <span class="keyword">default</span> "yyyyMM 형식에 맞지 않습니다."</span>;</span><br><span class="line"></span><br><span class="line">  Class&lt;?&gt;[] groups() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  Class&lt;? extends Payload&gt;[] payload() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line">  </span><br><span class="line">  <span class="function">String <span class="title">pattern</span><span class="params">()</span> <span class="keyword">default</span> "yyyyMMdd"</span>; <span class="comment">//기본패턴이 yyyyMM이지만 validator에서 Datetime으로 받기 때문에 yyyyMMdd를 넣어줘야함.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>2. Validator 로직 작성하기위에서 만든 어노테이션을 활용하여 유효성체크를 하는 클래스를 만들어야한다.new Java Class를 생성하고 아래처럼 작성하면 된다.<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">YearMonthValidator</span> <span class="keyword">implements</span> <span class="title">ConstraintValidator</span>&lt;<span class="title">YearMonth</span>, <span class="title">String</span>&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String pattern;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(YearMonth constratintAnnotation)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.pattern = constratintAnnotation.pattern();</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String value, ConstraintValidatorContext cxt)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    LocalDate l = LocalDate.parse(value+<span class="string">"01"</span>, DateTimeFormatter.ofPattern(<span class="keyword">this</span>.pattern));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>3. 사용하기<p>그리고 사용법은 VO에서 패턴을 걸어주면된다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// VO 일부</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@YearMonth</span></span><br><span class="line"><span class="keyword">private</span> String reqDate;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Spring/">Spring</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/%ED%8C%A8%EC%8A%A4%ED%8A%B8%EC%BA%A0%ED%8D%BC%EC%8A%A4-%EC%B4%88%EA%B2%A9%EC%B0%A8Java-Spring/">패스트캠퍼스(초격차Java/Spring)</category>
      
      
      <comments>https://sowon-dev.github.io/2021/08/01/210802Spring-Validation/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>TCP통신 vs UDP통신 차이점</title>
      <link>https://sowon-dev.github.io/2021/07/30/210730TCPVSUDP/</link>
      <guid>https://sowon-dev.github.io/2021/07/30/210730TCPVSUDP/</guid>
      <pubDate>Fri, 30 Jul 2021 05:52:57 GMT</pubDate>
      
      <description>&lt;p&gt;두 통신의 차이점에 대해서는 면접은 물론 실무에서도 알고있어야하는 내용으로 이에 대해 알아보자&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>두 통신의 차이점에 대해서는 면접은 물론 실무에서도 알고있어야하는 내용으로 이에 대해 알아보자</p><a id="more"></a><h1 id="TCP통신-vs-UDP통신"><a href="#TCP통신-vs-UDP통신" class="headerlink" title="TCP통신 vs UDP통신"></a>TCP통신 vs UDP통신</h1><p>TCP통신</p><ul><li>신뢰성있는 통신: 보낸 데이터를 잘 받았다고 ACK를 보내지 않으면 다음 데이터를 보내지 않고 계속 기다린다.</li><li>request가 잘 왔는지 ACK를 통해 꼭 확인하고 response를 한다.</li><li>속도 느림</li><li>예) 모든 웹통신</li></ul><p>UDP통신</p><ul><li>신뢰성없는 통신: 보낸 데이터가 중간에 유실이 되어도 확인하지 않고 다음 데이터를 보낸다.</li><li>ACK를 받지 않고 보내고싶은 데이터를 마구 보낼 수 있다.</li><li>속도빠름</li><li>사람이 이해할 수 있는 모든 것들은 UDP통신을 하면 됨</li><li>예) 전화</li></ul>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Network/">Network</category>
      
      
      
      <comments>https://sowon-dev.github.io/2021/07/30/210730TCPVSUDP/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>Spring 들여다보기: IoC, AOP</title>
      <link>https://sowon-dev.github.io/2021/07/27/210728Spring/</link>
      <guid>https://sowon-dev.github.io/2021/07/27/210728Spring/</guid>
      <pubDate>Tue, 27 Jul 2021 15:00:00 GMT</pubDate>
      
      <description>&lt;h1 id=&quot;IoC란&quot;&gt;&lt;a href=&quot;#IoC란&quot; class=&quot;headerlink&quot; title=&quot;IoC란&quot;&gt;&lt;/a&gt;IoC란&lt;/h1&gt;&lt;p&gt;스프링에서 일반적으로 Java 객체를 new로 생성하여 Spring Container에게 관리를 맡긴다.&lt;br&gt;즉, 개발자에서 프레임워크로 객체 제어의 권한이 넘어 갔으므로 &lt;code&gt;제어의 역전(Inversion of Control)&lt;/code&gt;이라고 한다.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="IoC란"><a href="#IoC란" class="headerlink" title="IoC란"></a>IoC란</h1><p>스프링에서 일반적으로 Java 객체를 new로 생성하여 Spring Container에게 관리를 맡긴다.<br>즉, 개발자에서 프레임워크로 객체 제어의 권한이 넘어 갔으므로 <code>제어의 역전(Inversion of Control)</code>이라고 한다.</p><a id="more"></a><p>스프링이 알아서 객체의 생명주기를 관리한다면 개발자는 어떻게 그 객체를 사용할 수 있을까?<br>DI를 통해서 사용할 수 있다.</p><p><br><br><br></p><h2 id="DI-Dependency-Injection"><a href="#DI-Dependency-Injection" class="headerlink" title="DI(Dependency Injection)"></a>DI(Dependency Injection)</h2><p>의존성 주입이란 객체를 직접 생성/제어하는 것이 아니라, 제어의 역행을 사용해서 특정 객체를 필요한 객체의 외부에 가져다가 연결하는 것을 뜻한다.<br>객체가 필요한 어떤 객체를 생성자 혹은 setter를 통해 주입하는 것을 말한다.</p><ul><li><a href="https://sowon-dev.github.io/2020/10/03/201003spring-1/#%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85-%EB%B0%A9%EB%B2%95">DI 두가지 방법 예시</a></li></ul><p><br><br><br></p><h2 id="빈-Bean-이란"><a href="#빈-Bean-이란" class="headerlink" title="빈(Bean)이란?"></a>빈(Bean)이란?</h2><p>스프링 컨테이너에서 관리되는 객체들을 모두 빈이라고 한다.</p><p><br><br><br></p><h2 id="DI된-빈-사용하는-방법"><a href="#DI된-빈-사용하는-방법" class="headerlink" title="DI된 빈 사용하는 방법"></a>DI된 빈 사용하는 방법</h2><ul><li>@SpringBootApplication: 등록된 빈을 확인할 수 있다.</li><li>@Component: 해당 어노테이션이 붙은 클래스는 스프링에서 빈으로 생성하여 자동적으로 관리한다.</li><li>@Qualifier(“빈이름”): @Component가 여러 개가 있는 경우 스프링이 어느 것을 선택해야할 지 헷갈리므로 @Qualifier로 이름을 지정해서 빈을 사용하면 된다.</li></ul><p>이렇게 빈으로 등록한 클래스를 어떻게 가져와서 사용할까?<br>먼저 ApplicationContextAware를 구현한 ApplicationProvider클래스를 생성한 뒤 <code>@Component</code>를 통해서 빈 등록을 한다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApplicationProvider</span> <span class="keyword">implements</span> <span class="title">ApplicationContextAware</span>  </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> ApplicationContext context;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.context = applicationContext;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ApplicationContext <span class="title">getContext</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> context;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>new로 생성할 필요없이 <code>@Component</code>로 등록된 빈들은 getBean()메서드를 통해서 접근할 수 있다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 기존 방법: 개발자가 직접 new로 클래스 생성</span></span><br><span class="line">Example ex1 = <span class="keyword">new</span> Example(클래스명);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 스프링에게 loC한 방법</span></span><br><span class="line">Example ex1 = context.getBean(빈등록한클래스명<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h2 id="한-클래스에서-여러-개-빈-생성하고-싶은-경우"><a href="#한-클래스에서-여러-개-빈-생성하고-싶은-경우" class="headerlink" title="한 클래스에서 여러 개 빈 생성하고 싶은 경우"></a>한 클래스에서 여러 개 빈 생성하고 싶은 경우</h2><ul><li>@Configuration: 한 클래스에서 여러 개의 빈을 등록하겠다는 의미. @Component와 동일한 동작이지만 여러 개 빈을 한 클래스에 등록할 수 있다. </li><li>@Bean(“빈이름”): @Configuration를 사용한 클래스 안에서 여러 개의 빈을 @Bean으로 등록할 수 있다. 스프링이 헷갈리지 않도록 각각 빈이름을 붙여줘야한다.</li></ul><p>한 클래스에서 여러 개의 빈 생성하는 예시를 보자.<br>여기서 return에 new로 생성한 것은 예시일뿐 실무에서는 set메서드, 생성자, 변수에 @Autowird, Inject등의 방법을 통해서 객체를 받아온 뒤 진행한다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span>(<span class="string">"빈이름1"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Example <span class="title">ex</span><span class="params">(FirstBaseClass firstBaseClass)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> Example(firstBaseClass);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span>(<span class="string">"빈이름2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> Example <span class="title">ex</span><span class="params">(SecondBaseClass secondBaseClass)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> Example(secondBaseClass);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>위에서 생성한 빈 중 FirstBaseClass를 사용하는 예시이다</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example ex1 = context.getBean(<span class="string">"firstBaseClass"</span> , Example<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure><p><br><br><br></p><h1 id="AOP-Aspect-Oriented-Programming-란"><a href="#AOP-Aspect-Oriented-Programming-란" class="headerlink" title="AOP( Aspect Oriented Programming)란"></a>AOP( Aspect Oriented Programming)란</h1><p>AOP는의 관점 지향 프로그래밍으로 반복되는 코드들을 한 곳으로 모아서 사용할 수 있게하는, 즉 모듈화하겠다는 개념이다. </p><p>자주 사용하는 어노테이션은 아래와 같다.</p><ul><li>@Aspect: AOP를 정의하는 Class에 할당</li><li>@Pointcut: 기능을 어디에 적용시킬지, 예를 들어 메서드에 적용시킬 지, 어노테이션에 적용시킬지와 같은 AOP를 적용시킬 지점을 설정</li><li>@Before (이전) : 메서드 실행하기 이전</li><li>@After (이후) : 메서드의 결과에 관계없이(즉 성공, 예외 관계없이) 메서드가 완료 되면 실행</li><li>@AfterReturning 메서드호출 성공 실행 시</li><li>@AfterThrowing (예외 발생 이후) : 메서드호출 실패 예외 발생시</li><li>@Around (메소드 실행 전후) : Before / After 모두 제어</li></ul><p><br><br><br></p><h1 id="ObjectMapper"><a href="#ObjectMapper" class="headerlink" title="ObjectMapper"></a>ObjectMapper</h1><p>objectMapper 클래스를 통해서 Json node에 접근 할 수 있다.</p><ul><li>참고: <a href="https://www.baeldung.com/jackson-object-mapper-tutorial">https://www.baeldung.com/jackson-object-mapper-tutorial</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Spring/">Spring</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/%ED%8C%A8%EC%8A%A4%ED%8A%B8%EC%BA%A0%ED%8D%BC%EC%8A%A4-%EC%B4%88%EA%B2%A9%EC%B0%A8Java-Spring/">패스트캠퍼스(초격차Java/Spring)</category>
      
      
      <comments>https://sowon-dev.github.io/2021/07/27/210728Spring/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[MyBatis] insert할때 자동으로 키 생성하기(useGeneratedKeys과 selectKey방식 차이점)</title>
      <link>https://sowon-dev.github.io/2021/07/26/210727MyBatis-keyProperty/</link>
      <guid>https://sowon-dev.github.io/2021/07/26/210727MyBatis-keyProperty/</guid>
      <pubDate>Mon, 26 Jul 2021 15:00:00 GMT</pubDate>
      
      <description>&lt;h2 id=&quot;😎-insert할때-자동으로-번호를-올리고-싶어&quot;&gt;&lt;a href=&quot;#😎-insert할때-자동으로-번호를-올리고-싶어&quot; class=&quot;headerlink&quot; title=&quot;😎 insert할때 자동으로 번호를 올리고 싶어&quot;&gt;&lt;/a&gt;😎 insert할때 자동으로 번호를 올리고 싶어&lt;/h2&gt;&lt;p&gt;방금 insert한 autoincrement가 걸린 PK값을 바로 사용하고싶다면 어떻게 해야할까?&lt;br&gt;두가지방식이 있다. &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;useGeneratedKeys와 keyProperty 사용하기&lt;/li&gt;
&lt;li&gt;selectKey 사용하기&lt;br&gt;이름을 어떻게 부르는 지 몰라서 그냥 내가 지어보았다.</description>
      
      
      
      <content:encoded><![CDATA[<h2 id="😎-insert할때-자동으로-번호를-올리고-싶어"><a href="#😎-insert할때-자동으로-번호를-올리고-싶어" class="headerlink" title="😎 insert할때 자동으로 번호를 올리고 싶어"></a>😎 insert할때 자동으로 번호를 올리고 싶어</h2><p>방금 insert한 autoincrement가 걸린 PK값을 바로 사용하고싶다면 어떻게 해야할까?<br>두가지방식이 있다. </p><ol><li>useGeneratedKeys와 keyProperty 사용하기</li><li>selectKey 사용하기<br>이름을 어떻게 부르는 지 몰라서 그냥 내가 지어보았다.<a id="more"></a></li></ol><p><br><br><br></p><h2 id="방법1-useGeneratedKeys와-keyProperty"><a href="#방법1-useGeneratedKeys와-keyProperty" class="headerlink" title="방법1: useGeneratedKeys와 keyProperty"></a>방법1: useGeneratedKeys와 keyProperty</h2><p>항상 useGeneratedKeys와 keyProperty는 함께 사용하면 된다.</p><ul><li>useGeneratedKeys : insert나 update됨가 동시에 자동생성된 키를 가져올 수 있는 속성으로 true로 설정 (default: false)</li><li>keyProperty : 리턴 될 key property 설정. 즉 values나 set 다음에 오는 컬럼명과 동일하게 설정하면 됨. 여러개를 사용한다면 ,(콤마)를 구분자로 설정</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> exampleVO &#123;</span><br><span class="line">  <span class="keyword">int</span> userCode;</span><br><span class="line">  String name;</span><br><span class="line">  String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertExample"</span> <span class="attr">useGeneratedKeys</span>=<span class="string">"true"</span> <span class="attr">keyProperty</span>=<span class="string">"userCode"</span> <span class="attr">parameterType</span>=<span class="string">"exampleVO"</span>&gt;</span> </span><br><span class="line">INSERT INTO example </span><br><span class="line">   (name, email ) </span><br><span class="line">VALUES </span><br><span class="line">   (#&#123;name&#125;, #&#123;email&#125; ) </span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>userCode가 자동 증감되어 DB에 등록된다.<br>따로 set해주지 않더라도 exampleVO.getUserCode()를 하면 autoIncrement된 값을 get할 수 있다!<br>세상 간편하다!<br>insert 나 update return받을 때 주로 사용할 수 있다.</p><p><br><br><br></p><h2 id="방법2-selectKey"><a href="#방법2-selectKey" class="headerlink" title="방법2: selectKey"></a>방법2: selectKey</h2><p>마이바티스는 자동생성키 칼럼을 지원하지 않는 다른 데이터베이스를 위해 다른 방법 또한 제공한다.<br>바로 selectKey를 이용하는 것이다.<br>아래 예제에서 selectKey구문이 먼저 실행되고 userCode 최대값에서 1씩 증가되게끔 셋팅된다. 그리고 나서 insert 구문이 실행된다. 이건 복잡한 자바코드 없이도 데이터베이스에 자동생성키의 행위와 비슷한 효과를 가지도록 해준다.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertExample"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">"userCode"</span> <span class="attr">resultType</span>=<span class="string">"int"</span> <span class="attr">order</span>=<span class="string">"BEFORE"</span>&gt;</span></span><br><span class="line">    SELECT IFNULL(MAX(userCode+1),1) FROM example</span><br><span class="line">  <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">  INSERT INTO example</span><br><span class="line">   (userCode, email)</span><br><span class="line">  VALUES</span><br><span class="line">     (#&#123;userCode&#125;, #&#123;email&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>selectKey에 대한 추가설명은 아래 포스팅을 참고하면 된다.</p><ul><li><a href="https://sowon-dev.github.io/2021/06/03/210604MyBatis-selectKey/">select한 값을 바로 insert할 수 있을까?</a></li></ul><p><br><br><br></p><h2 id="방법1과-방법2의-차이"><a href="#방법1과-방법2의-차이" class="headerlink" title="방법1과 방법2의 차이"></a>방법1과 방법2의 차이</h2><p>위의 두 예시는 최근 userCode에서 <code>+1</code>을 해주는 결과를 나타낸다.<br>결과가 같은데 왜 방식이 두개일까? 사용방향에 따라 차이점이 존재하기때문이다.</p><p>방법 1은 DBMS의 도움이 필요하다. 즉 auto increment가 되는 DBMS만 사용가능하다.<br>만약 사용하는 DBMS는 AUTO INCREMENT를 지원해주지 않는다면 방법 2를 써야한다.</p><p>auto increment를 지원해주는 DBMS라 하더라도 단순히 <code>+1</code> 증감이 아닌 뭔가 커스텀하게 증가시키고싶다면 2번을 사용해야한다.<br>커스텀하게 증가시키는 게 무엇일까?<br>아래 예시처럼 항상 5자리로 userCode를 등록할 수 있다.</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertExample"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">resultType</span>=<span class="string">"int"</span> <span class="attr">keyProperty</span>=<span class="string">"userCode"</span> <span class="attr">order</span>=<span class="string">"BEFORE"</span>&gt;</span></span><br><span class="line">SELECT lpad(cast((IFNULL(MAX(userCode), 0) + 1) as char),5,'0') </span><br><span class="line">  FROM example</span><br><span class="line">    <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span> </span><br><span class="line">  INSERT INTO example</span><br><span class="line">   (userCode, email)</span><br><span class="line">  VALUES</span><br><span class="line">     (#&#123;userCode&#125;, #&#123;email&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>만약 현재 userCode의 최대값이 12라면 다음 userCode는 selectKey 실행에 의해 <code>00013</code>으로 DB에 등록된다.</p><p><br><br></p><h3 id="요약"><a href="#요약" class="headerlink" title="요약"></a>요약</h3><ul><li>방법1: DBMS가 auto increment를 지원하고 특정 컬럼에 <code>+1</code>하는 로직인 경우 사용</li><li>방법2: <ul><li>DBMS가 auto increment를 지원하지 않는 경우 사용</li><li>DBMS가 auto increment를 지원하지만 특정 규칙으로 컬럼값을 증가시키는 로직인 경우 사용</li></ul></li></ul><p><br><br><br></p><h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul><li><a href="https://mybatis.org/mybatis-3/sqlmap-xml.html">https://mybatis.org/mybatis-3/sqlmap-xml.html</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Database/">Database</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/MyBatis/">MyBatis</category>
      
      
      <comments>https://sowon-dev.github.io/2021/07/26/210727MyBatis-keyProperty/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[패스트캠퍼스]올인원패키지 기술면접 인강 솔직 후기</title>
      <link>https://sowon-dev.github.io/2021/07/24/210725skillinterview/</link>
      <guid>https://sowon-dev.github.io/2021/07/24/210725skillinterview/</guid>
      <pubDate>Sat, 24 Jul 2021 23:05:03 GMT</pubDate>
      
      <description>&lt;p&gt;패스트캠퍼스 올인원패키지 중 기술면접 완전 정복 강의를 듣고 요약 정리 및 후기를 작성해보았다.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>패스트캠퍼스 올인원패키지 중 기술면접 완전 정복 강의를 듣고 요약 정리 및 후기를 작성해보았다.</p><a id="more"></a><h2 id="후기"><a href="#후기" class="headerlink" title="후기"></a>후기</h2><p>추천도(5점만점):⭐⭐<br>특별할 것없이 구글링만해봐도 나오는 내용만 하기때문에 초반에는 살짝 지루했다.<br>실제 모의면접 음성을 들으면서 조언하는 부분이 인상적이었다. 이부분이 없었다면 그냥 유투브의 기술면접 팁 영상들과 비슷한 느낌이다.</p><p><br><br><br></p><h2 id="최근-기술-면접-형태-손코딩-테스트"><a href="#최근-기술-면접-형태-손코딩-테스트" class="headerlink" title="최근 기술 면접 형태: 손코딩 테스트"></a>최근 기술 면접 형태: 손코딩 테스트</h2><p>손코딩 테스트를 통해 확인하고자 하는 것은 크게 3가지이다.</p><ol><li>커뮤니케이션이 되는가?</li><li>꼼꼼하게 작성하는가?<ul><li>예를 들어 데이터를 처리하시오 라는 애매모호한 문제를 출제했다면 그 데이터가 정수인지, 부동소수점은 있는지, 문자열인지 등을 확인하고 작성하는 지 확인</li></ul></li><li>Problem Solving Logic이 합리적인가?</li></ol><p>그럼 손코딩 테스트는 어떻게 해결하면 좋을까? 아래 5단계를 따라하면 좋다.</p><ol><li>문제 듣기</li><li>예제를 통해 문제 이해하기</li><li>무식하게 풀기</li><li>질문자와 커뮤니케이션을 통해 개선하기</li><li>마이너한 부분의 최적화</li><li>검토하기</li></ol><p><br><br><br></p><h2 id="자기소개질문-팁"><a href="#자기소개질문-팁" class="headerlink" title="자기소개질문 팁"></a>자기소개질문 팁</h2><p>채용자는 시간이 없다. 조직이 원하는 기능을 개발할 수 있는 지, 함께 일하는데 문제가 없는 지를 보는 질문이다.<br>성장과정, 성격을 중점을 둘 필요없고 <code>지원동기</code>에 중점을 두고 말하면 된다.<br>비전공자인 점을 먼저 얘기할 필요가 없다. 가장 중요한 점을 먼저 얘기해야한다.<br>즉 개발경험을 먼저 얘기해야한다.</p><p><br><br><br></p><h2 id="프로젝트시-어려운-점과-극복방법"><a href="#프로젝트시-어려운-점과-극복방법" class="headerlink" title="프로젝트시 어려운 점과 극복방법"></a>프로젝트시 어려운 점과 극복방법</h2><p>시간압박, 마감기한의 어려움보다는 기술적인 애로점을 만났고 스스로 익혀서 극복했다고 한 점을 말하는 것이 더 좋다.</p><p><br><br><br></p><h2 id="CS-기본지식"><a href="#CS-기본지식" class="headerlink" title="CS 기본지식"></a>CS 기본지식</h2><h3 id="주요질문1-프로세스와-스레드-차이"><a href="#주요질문1-프로세스와-스레드-차이" class="headerlink" title="주요질문1: 프로세스와 스레드 차이"></a>주요질문1: 프로세스와 스레드 차이</h3><ul><li>프로세스: 운영체제로부터 자원을 할당받아 실행</li><li>스레드: 프로세스로부터 자원을 할당받아 실행<br>추가로<br>하나의 프로세스 안에서 여러 스레드 생성 가능하며, 각 스레드별 개별 스택을 가지고 있고 프로세스의 전역 메모리 공간을 공유하며 프로그램을 실행한다.</li><li>프로세스는 코드/데이터/스택/힙 메모리 영역을 기반으로 실행</li><li>스레드는 프로세스 안에서 개별적인 스택을 가지고 코드/데이터/힙 영역을 공유하며 실행</li></ul><p><br><br><br></p><h3 id="주요질문2-스크립트-언어와-컴파일-언어-차이"><a href="#주요질문2-스크립트-언어와-컴파일-언어-차이" class="headerlink" title="주요질문2: 스크립트 언어와 컴파일 언어 차이"></a>주요질문2: 스크립트 언어와 컴파일 언어 차이</h3><ul><li>스크립트언어: 파이썬, 루비, PHP등 컴파일 단계없이 실행 단계에서 한 줄씩 기계어로 번역 후 실행되므로 통상 컴파일 언어보다 실행이 느림</li><li>컴파일언어: C계열, JAVAE등 컴파일러를 통해 사전에 컴파일되어 기계어 상태되므로 실행이 빠름</li></ul><p><br><br><br></p><h3 id="주요질문3-동기식과-비동기식-차이"><a href="#주요질문3-동기식과-비동기식-차이" class="headerlink" title="주요질문3: 동기식과 비동기식 차이"></a>주요질문3: 동기식과 비동기식 차이</h3><ul><li>동기식: 요청에 대한 응답을 기다린 후, 응답이 오면 다음 요청을 하는 방식</li><li>비동기식: 요청에 대한 응답을 기다리지않고, 다음 동작은 진행하는 방식<br>추가로 장단점을 설명하면 좋다.</li><li>동기식<ul><li>장점: 구성이 단순, 순서대로 실행가능</li><li>단점: 멀티태스킹 불가</li></ul></li><li>비동기식<ul><li>장점: 멀티태스킹 가능</li><li>단점: 일정 시간당 요청량이 많아질 경우 부하 발생 -&gt; 이를 해결하기 위한 추가 처리 필요</li></ul></li></ul><p><br><br><br></p><h3 id="주요질문4-DB에서-인덱스를-사용하는-이유와-장단점"><a href="#주요질문4-DB에서-인덱스를-사용하는-이유와-장단점" class="headerlink" title="주요질문4: DB에서 인덱스를 사용하는 이유와 장단점"></a>주요질문4: DB에서 인덱스를 사용하는 이유와 장단점</h3><ul><li>인덱스: 데이터를 논리적으로 정렬해서 검색과 정렬 속도를 높이기 위해 사용</li><li>단점: 데이터 삽입 및 변경이 수시로 일어나면 매번 인덱스를 변경해야 하므로 성능 저하를 막기 위한 고려가 필요함</li></ul><p><br><br><br></p><h3 id="주요질문5-TCP와-UDP-차이점과-장단점"><a href="#주요질문5-TCP와-UDP-차이점과-장단점" class="headerlink" title="주요질문5: TCP와 UDP 차이점과 장단점"></a>주요질문5: TCP와 UDP 차이점과 장단점</h3><ul><li>UDP: 비연결형 프로토콜과 흐름제어, 오류제어를 하지않음 -&gt; 송수신에 적은 데이터가 필요</li><li>TCP: 연결혈 프로토콜로 흐름제어, 오류제어를 함 -&gt; 데이터 송수신에 신뢰성을 가짐<br>TCP는 신뢰성있는 데이터 전송에서 사용 -&gt;  로직이 들어가기에 상대적으로 느림<br>UDP는 유실이 조금 되어도 상관없는 데이터 전송에서 사용 -&gt; 로직이 적게 들어가기때문에 상대적으로 빠름<br>더 자세한 내용은 <a href="https://sowon-dev.github.io/2021/07/30/210730TCPVSUDP/">TCP통신 vs UDP통신 차이점</a>포스팅 참고</li></ul><p><br><br><br></p><h2 id="자바질문"><a href="#자바질문" class="headerlink" title="자바질문"></a>자바질문</h2><h3 id="주요질문1-JVM과-JAVA-프로그램-실행-과정을-설명해보세요"><a href="#주요질문1-JVM과-JAVA-프로그램-실행-과정을-설명해보세요" class="headerlink" title="주요질문1: JVM과 JAVA 프로그램 실행 과정을 설명해보세요"></a>주요질문1: JVM과 JAVA 프로그램 실행 과정을 설명해보세요</h3><ul><li>JVM: Java Virtual Machine(자바 가상 머신)의 약자로, 자바 프로그램을 자바 API를 기반으로 실행하는 역할</li><li>JAVA 프로그램 실행과정: 프로그램 실행하면 JVM이 OS로부터 필요한 메모리만큼 할당 받고 -&gt; 자바 클래스파일을 실행한다.</li></ul><p><br><br><br></p><h3 id="주요질문2-Garbage-Collection이-필요한-이유"><a href="#주요질문2-Garbage-Collection이-필요한-이유" class="headerlink" title="주요질문2: Garbage Collection이 필요한 이유"></a>주요질문2: Garbage Collection이 필요한 이유</h3><p>java 프로그램은 메모리를 명시적으로 지정해서 해제하지 않기 때문에, Garbage Collection을 통해 필요없는 객체를 찾아 지우는 작업을 수행한다.</p><p><br><br><br></p><h3 id="주요질문3-Overriding-vs-overloading"><a href="#주요질문3-Overriding-vs-overloading" class="headerlink" title="주요질문3: Overriding vs overloading"></a>주요질문3: Overriding vs overloading</h3><ul><li>overriding: 상속관계일때 사용. 상위 클래스가 가지고 있는 메서드를 하위 클래스가 재정의해서 사용<ul><li>메서드 이름 및 파라미터수 동일</li></ul></li><li>overloading: 같은 이름의 메서드 여러개를 가지면서 매개변수의 유형과 개수가 다르도록 하는 기술</li></ul><p>더 자세한 <a href="https://sowon-dev.github.io/2020/07/05/200706javai/#%EB%A9%94%EC%84%9C%EB%93%9C-%EC%98%A4%EB%B2%84%EB%9D%BC%EC%9D%B4%EB%94%A9%EC%8B%9C-%EB%98%91%EA%B0%99%EC%95%84%EC%95%BC-%ED%95%98%EB%8A%94-%EA%B2%83">오버로딩과 오버라이딩은 차이가 있으니 용어에 주의하자</a> 포스팅을 참고하면 된다.</p><p><br><br><br></p><h3 id="주요질문4-Interface-와-Abstract"><a href="#주요질문4-Interface-와-Abstract" class="headerlink" title="주요질문4: Interface 와 Abstract"></a>주요질문4: Interface 와 Abstract</h3><ul><li>Abstract: 추상클래스는 추상 메서드 1개이상을 가진 클래스<ul><li>상속시 추상메서드를 반드시 구현하게 해야할 때 사용</li><li>단일 상속. 클래스끼리 다중 상속 안됨</li><li>new로 객체 생성 안됨</li></ul></li><li>Interface: 상수와 메서드의 집합. implements 받은 곳에서 모두 구현을 강제함<ul><li>인터페이스끼리 다중 상속 가능</li></ul></li></ul><p><br><br><br></p><h3 id="주요질문5-디자인패턴이-무엇인지-싱글톤에-대해-간단히-설명"><a href="#주요질문5-디자인패턴이-무엇인지-싱글톤에-대해-간단히-설명" class="headerlink" title="주요질문5: 디자인패턴이 무엇인지 싱글톤에 대해 간단히 설명"></a>주요질문5: 디자인패턴이 무엇인지 싱글톤에 대해 간단히 설명</h3><p>공부했던 패턴보다 어떤 프로젝트를 할때 이러한 패턴을 사용해봤습니다라는 식으로 답변하는 것이 좋다.</p><ul><li>디자인패턴: 공통적인 소프트웨어 코드 작성 문제를 해결하는데 도움이 될 수 있느 코드 패턴</li><li>싱글톤: 전체 프로그램에서 단 1개의 객체를 생성해서 공유할 수 있는 코드 패턴</li></ul><p><br><br><br></p><h2 id="운영체제-및-데이터베이스-주요-질문"><a href="#운영체제-및-데이터베이스-주요-질문" class="headerlink" title="운영체제 및 데이터베이스 주요 질문"></a>운영체제 및 데이터베이스 주요 질문</h2><p>아래 질문들은 스스로 찾아봐야하는 질문이다.<br>따라서 내가 찾은 답변들을 적어보려고 한다.</p><ul><li>deadlock의 개념 및 해결방법</li><li>뮤텍스와 세마포어의 차이점</li><li>가상메모리란?</li><li>컨텍스트 스위칭이란?</li><li>트랜잭션이란?</li><li>RDBMS와 NoSQL 차이점</li></ul><p><br><br><br></p><h2 id="네트워크-주요-질문"><a href="#네트워크-주요-질문" class="headerlink" title="네트워크 주요 질문"></a>네트워크 주요 질문</h2><p>아래 질문들은 스스로 찾아봐야하는 질문이다.<br>따라서 내가 찾은 답변들을 적어보려고 한다.</p><ul><li>OSI 7계층이란?</li><li>HTTP와 HTTPS 차이점</li><li>쿠키와 세션의 차이점</li><li>RESTfUl 개념</li><li>TCP의 3-way-handShake와 4-way-handShake 차이점 </li></ul><p><br><br><br></p><h2 id="자료구조와-알고리즘-주요-질문"><a href="#자료구조와-알고리즘-주요-질문" class="headerlink" title="자료구조와 알고리즘 주요 질문"></a>자료구조와 알고리즘 주요 질문</h2><p>아래 질문들은 스스로 찾아봐야하는 질문이다. 따라서 내가 찾은 답변들을 적어보려고 한다.<br>참곻로 자료구조와 알고리즘은 코딩테스트를 통해서 검증하는 경우가 더 많다.</p><ul><li>배열과 링크드 리스트의 장단점에 대해 간략히 설명해주세요</li><li>BST의 최악의 시간 복잡도와 최악의 시간이 걸리는 케이스에 대해 설명해주세요</li><li>해쉬 테이블에 대해 설명해주세요</li><li>Fibonacci 공식을 recursive와 dynamic programming으로 구현시 차이점에 대해 설명해주세요.</li><li>DFS와 BFS이란?</li></ul><p><br><br><br></p><h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul><li><a href="https://fastcampus.co.kr/dev_online_algo">https://fastcampus.co.kr/dev_online_algo</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Lectures-Seminars/">Lectures &amp; Seminars</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/Review/">Review</category>
      
      
      <comments>https://sowon-dev.github.io/2021/07/24/210725skillinterview/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>DBeaver 단축키 추천</title>
      <link>https://sowon-dev.github.io/2021/07/21/210722DEeaver-shortcutkey/</link>
      <guid>https://sowon-dev.github.io/2021/07/21/210722DEeaver-shortcutkey/</guid>
      <pubDate>Wed, 21 Jul 2021 15:00:00 GMT</pubDate>
      
      <description>&lt;p&gt;오늘 팀장님께 쿼리질문하나 했다가 엄청난 단축키를 알게 되었다. 와 이걸 모르고 DBeaver를 사용하다니 나는 정말 바보였다.&lt;br&gt;여러 단축키 중에서도 실무에서 가장 많이 사용되는 단축키 3개는 필수로 암기하고 있으면 일찍 퇴근할 수 있다.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>오늘 팀장님께 쿼리질문하나 했다가 엄청난 단축키를 알게 되었다. 와 이걸 모르고 DBeaver를 사용하다니 나는 정말 바보였다.<br>여러 단축키 중에서도 실무에서 가장 많이 사용되는 단축키 3개는 필수로 암기하고 있으면 일찍 퇴근할 수 있다.</p><a id="more"></a><h2 id="🔑-추천-단축키"><a href="#🔑-추천-단축키" class="headerlink" title="🔑 추천 단축키"></a>🔑 추천 단축키</h2><ul><li><p><code>alt + shift + a</code> : 열편집<br>단축키를 클릭하면 화면이 살짝 커지면서 열편집 화면으로 전환이 된다.<br>이때 마우스로 원하는 열을 드래그하면 해당 열이 선택되고 문자 삽입삭제등 다양한 작업을 선택한 모든 열에 적용할 수 있다. 다만 한글인 경우 쿼리가 삭제되는 오류가 있으니 문자 입력시 꼭 영문자로 입력해야한다.<br>열편집화면에서 나오고 싶을때도 동일한 단축키를 눌리면 된다.</p></li><li><p><code>ctrl + shift + x</code> : 대문자<br>블록을 지정한 뒤 단축키를 누르면 블록안의 모든 문자는 대문자로 바뀐다.</p></li><li><p><code>ctrl + sjoft + y</code> : 소문자<br>블록을 지정한 뒤 단축키를 누르면 블록안의 모든 문자는 소문자로 바뀐다.</p></li></ul><p><br><br><br></p><h2 id="🔑-더-많은-단축키가-궁금하다면"><a href="#🔑-더-많은-단축키가-궁금하다면" class="headerlink" title="🔑 더 많은 단축키가 궁금하다면?"></a>🔑 더 많은 단축키가 궁금하다면?</h2><ul><li><a href="https://dbeaver.com/docs/wiki/Shortcuts/">DBeaver 단축키 docs</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/JOURNAL/">JOURNAL</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/DBeaver/">DBeaver</category>
      
      
      <comments>https://sowon-dev.github.io/2021/07/21/210722DEeaver-shortcutkey/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[웨비나후기]7월 우아한테크세미나 : AAA</title>
      <link>https://sowon-dev.github.io/2021/07/21/210721woowacourse-architecture/</link>
      <guid>https://sowon-dev.github.io/2021/07/21/210721woowacourse-architecture/</guid>
      <pubDate>Wed, 21 Jul 2021 03:40:50 GMT</pubDate>
      
      <description>&lt;h1 id=&quot;웨비나-소개-및-후기&quot;&gt;&lt;a href=&quot;#웨비나-소개-및-후기&quot; class=&quot;headerlink&quot; title=&quot;웨비나 소개 및 후기&quot;&gt;&lt;/a&gt;웨비나 소개 및 후기&lt;/h1&gt;&lt;p&gt;아키텍처라는 말에 어려울까봐 지레 겁먹고 웨비나를 듣지 않으려고 했다.&lt;br&gt;하지만 현재 회사에서 MSA로 진행중이며 인프라와 아키텍처를 구축하는 팀장님들이 겁나 멋있어보였기에 궁금해졌다.&lt;br&gt;나도 언젠가 팀장님들처럼 척척 만들어보고싶다고 생각하면서 중간에 듣다가 너무 어려우면 알고리즘이나 풀어야지하면서.&lt;br&gt;그러나 왠걸. 너무 재밌다!&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<h1 id="웨비나-소개-및-후기"><a href="#웨비나-소개-및-후기" class="headerlink" title="웨비나 소개 및 후기"></a>웨비나 소개 및 후기</h1><p>아키텍처라는 말에 어려울까봐 지레 겁먹고 웨비나를 듣지 않으려고 했다.<br>하지만 현재 회사에서 MSA로 진행중이며 인프라와 아키텍처를 구축하는 팀장님들이 겁나 멋있어보였기에 궁금해졌다.<br>나도 언젠가 팀장님들처럼 척척 만들어보고싶다고 생각하면서 중간에 듣다가 너무 어려우면 알고리즘이나 풀어야지하면서.<br>그러나 왠걸. 너무 재밌다!</p><a id="more"></a><p>특히 레거시와 요구사항의 문제상황을 주고 15초동안 이 문제를 어떤 순서로 풀어갈 것인지 생각하는 부분에서 정말 많은 것을 배웠다.<br>연사님은 문제상황을 척척 해결해나가는 슈퍼개발자였다. 정말 멋있고 나도 그렇게 되고 싶었다.<br>웨비나 듣길 정말 잘했다.</p><iframe src="https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2FwoowahanTech%2Fposts%2F2918911021682817&show_text=true&width=500" width="100%" height="473" style="border:none;overflow:hidden" scrolling="no" frameborder="0" allowfullscreen="true" allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share"></iframe><p><br><br><br></p><h1 id="Software-Architect-두-분류"><a href="#Software-Architect-두-분류" class="headerlink" title="Software Architect 두 분류"></a>Software Architect 두 분류</h1><ul><li>Architectus Reloaded<ul><li>시스템의 무결성을 보장하는 한 명의 아키텍트</li><li>아키텍트 혼자 유일한 결정권자이기때문에 아티텍트가 처리해야 할 업무가 프로젝트의 병목이 됨</li><li>초반에 결정되고 다른 사람들은 그 계획을 따라가는 구조</li></ul></li><li>Architectus Oryzus<ul><li>프로젝트의 전반이 어떻게 돌아가는 지를 잘 알고, 이슈들을 발견하고 큰 문제가 되기 전에 미리 조치를 취할 수 있는 사람</li><li>개발자의 협력을 이끌어내는 아키텍트</li><li>개발팀의 멘토 역할을 하고 개발팀의 수준을 높여서 더 복잡한 이슈를 해결할 수 있도록 만드는 사람</li><li>한마디로 가이드!</li></ul></li></ul><p>좋은 아키텍트가 되기 위해서는 항상 공부해야한다.<br>연사님의 공부방법은 아래와 같다.</p><ol><li>인프런</li><li>Medium</li><li>Likedin: 좋은 아티클 공유</li><li>Udemy: 한 달에 유료 강좌 1개정도는 들으려고 노력함</li><li>Book: 읽었던 기술 서적을 정리해 놓으면 좋다. ex) <a href="https://github.com/nijin39/Lighthouse">Lighthouse</a></li></ol><p><br><br><br></p><h1 id="Architecture란"><a href="#Architecture란" class="headerlink" title="Architecture란?"></a>Architecture란?</h1><ul><li>노련한 개발자가 나눠주는 시스템 디자인에 대한 이해</li><li>변경하기 힘든 것들</li><li>쉽게 바뀌어서는 안되고, 충분히 이해하고 만들어야 하면서도 중요한 것들</li></ul><p>MSA패턴이 무조건 좋은 건 아니며 쿠버네티스를 쓴다고 다 MSA가 아니라고도 말씀해주셨다.<br><a href="https://www.slideshare.net/arawnkr/ss-195979955">차라리 잘 키운 모노리스 하나 열 마이크로 서비스 안 부럽다</a>고 한다.</p><p><br><br><br></p><h1 id="사례1-CI-CD없는-4년된-사용-프로그램을-오픈소스로-전환하는-프로젝트"><a href="#사례1-CI-CD없는-4년된-사용-프로그램을-오픈소스로-전환하는-프로젝트" class="headerlink" title="사례1: CI/CD없는 4년된 사용 프로그램을 오픈소스로 전환하는 프로젝트"></a>사례1: CI/CD없는 4년된 사용 프로그램을 오픈소스로 전환하는 프로젝트</h1><p>어떤 순서로 접근하면 좋을까?</p><ol><li>스프링부트를 띄어서 가장 어려운 서비스부분을 PoC(Proof Of Concept: 사전에 검증하는 것)함</li><li>Jenkins를 써서 CI/CD부터 구축</li><li>OOP(Object-oriented programming: 객체지향 프로그래밍)/DDD(Domain Driven Design) 설계</li><li>설계는 아키텍트, 개발은 외주업체 용역<ul><li>여기서 설계란 메소드, 클래스</li><li>외주업체 개발자가 아예 클래스를 만들 수 없도록 구조를 만듬. 만약 클래스 만들고 싶다면 아키텍트와 상의 후 아키텍트가 직접 배치를 고민하고 만들지 결정함)</li></ul></li><li>DB 어려운 조회는 VIEW로 만들고 CQRS<ul><li>CUD는 JPA</li><li>R는 MyBatis</li></ul></li><li>애자일방식으로 진행하며 TODO LIST는 스크럼방식 사용</li></ol><p><br><br><br></p><h1 id="사례2-B2C인데-장애가-많고-바로-배포하는-프로젝트"><a href="#사례2-B2C인데-장애가-많고-바로-배포하는-프로젝트" class="headerlink" title="사례2: B2C인데 장애가 많고 바로 배포하는 프로젝트"></a>사례2: B2C인데 장애가 많고 바로 배포하는 프로젝트</h1><p>1달만에 장애보고서 2번쓸 정도로 숫자가 맞지않고 개발하면 바로 배포하는데 공유하지는 않으며 코드리뷰는 하지만 설계는 하지 않는 상황.<br>어떤 순서로 접근하면 좋을까?</p><ol><li>애자일이라서 항상 배포하는 게 맞지만 이건 전제조건이 있음. 단위테스트와 DDD, 통합테스트가 잘 되어있어서 CI/CD안에서 자동화되어있을 때 바로 배포할 수 있음 -&gt; 그래서 정규배포로 변경함</li><li>User Story를 다시 작성함. 다시 AC(액셉턴스 크리테리아: 참과 거짓을 판단할 수 있는 명확항 문장)작성함.<ul><li>우아한 ATDD 영상 추천 : <a href="https://www.youtube.com/watch?v=ITVpmjM4mUE">https://www.youtube.com/watch?v=ITVpmjM4mUE</a></li><li>User Story(Value Statement, Acceptance Criteria, Definition Of Done 포함)를 먼저 개발자가 작성 -&gt; PM에게 확인을 받음 -&gt; 소스 코드작성. </li></ul></li><li>PO님과 핫도그를 먹으며 현 문제점과 해결을 위한 지속적인 노력함. 대화를 정말 많이했음.</li><li>DB를 같이 보면서 숫자를 맞춤</li><li>코드리뷰보다는 설계리뷰를 해봅시다<ul><li>코드리뷰는 후행적이다</li></ul></li></ol><p><br><br><br></p><h1 id="사례3-10년이-넘은-레거시-프로그램으로-부하가-극단적으로-많은-프로젝트"><a href="#사례3-10년이-넘은-레거시-프로그램으로-부하가-극단적으로-많은-프로젝트" class="headerlink" title="사례3: 10년이 넘은 레거시 프로그램으로 부하가 극단적으로 많은 프로젝트"></a>사례3: 10년이 넘은 레거시 프로그램으로 부하가 극단적으로 많은 프로젝트</h1><p>새로운 시스템도 기존의 시스템과 연동해야 하며 Oracle중심으로 이루어져있고 수강신청시스템처럼 부하가 극단적으로 왔다갔다하는 상황.<br>어떤 순서로 접근하면 좋을까?</p><p>여기서 Oracle중심이라는 의미는 비즈니스 로직이 대부분 오라클에 있다는 뜻으로 변경이 까다롭다는 의미이다. 배우면서 하는 프로젝트는 생각보다 더더더 굉장히 빡시다는 것을 깨달았다고 하셨다.</p><ol><li>극단적으로 부하가 왔다갔다하니까 서버리스가 훨씬 효과적일 수 있음 -&gt; NoSQL로 선택</li><li>근데 서버리스로 가면 Java랑 맞지 않음 -&gt; why? 워밍업시간이 오래걸림 </li><li>따라서 node로 진행 -&gt; But java개발자들이 바로 node로 업무하기에는 버겁기때문에 typescript를 사용</li><li>타입스크립트로 DDD -&gt; java개발자들에게 도움을 주기 위해 <a href="https://github.com/nijin39/msa-lab">직접 예시</a>를 작성함</li><li>리액트를 새로 배울 시간에 그냥 템플릿 구매함으로서 프로젝트 시간 절감</li><li>오라클을 최대한 유지하면서 이벤트만 사용</li></ol><p><br><br><br></p><h1 id="사례4-공통모듈이-있는-MSA인데-코드리뷰없고-단위테스트도-없는-프로젝트"><a href="#사례4-공통모듈이-있는-MSA인데-코드리뷰없고-단위테스트도-없는-프로젝트" class="headerlink" title="사례4: 공통모듈이 있는 MSA인데 코드리뷰없고 단위테스트도 없는 프로젝트"></a>사례4: 공통모듈이 있는 MSA인데 코드리뷰없고 단위테스트도 없는 프로젝트</h1><p>어떤 순서로 접근하면 좋을까?</p><ol><li>배포 의존보다 코드 중복이 나을 수 있음<ul><li>공통모듈은 비즈니스 로직이 빠져있으면서도 절대 바뀌지않을 애들(유효성체크등)만으로 만들어야 함.</li><li>만약 이를 어긴 채 비즈니스 로직이 있는 공통모듈을 배포한다면 배포폭풍이 일어남.</li><li>차라리 코드중복이 낫다.</li></ul></li><li>시스템 비용의 80%는 유지보수에서 나옴 -&gt; 오픈소스로 감당할 수 있을지 오픈 소스 도입전 충분히 생각해야함</li><li>비즈니스 코드가 기술보다 더 중요할 수 있음 </li><li>코드리뷰, 단위테스트도 없기때문에 소나큐브를 사용함<ul><li>CI할때 인텔리제이에서 Sonarqube 플러그인 설치하거나 CI 과정중에 자동화된 것을 넣는 것도 좋은 방법!</li></ul></li></ol><p><br><br><br></p><h1 id="추천-아키텍쳐-사이트"><a href="#추천-아키텍쳐-사이트" class="headerlink" title="추천 아키텍쳐 사이트"></a>추천 아키텍쳐 사이트</h1><ul><li><a href="https://marimba.team">https://marimba.team</a>: 미로보다 기능이 많지 않지만 깔끔하고 통합적임</li><li><a href="https://www.archunit.org">https://www.archunit.org</a>: 아키텍트 제한할 수 있음</li><li><a href="https://docs.fitnesse.org">https://docs.fitnesse.org</a>: 로직의 정합성에 대해서 사용자가 위키를 작성하고 그 위키기반으로 테스트 작성이 가능함. 서버리스 프레임워크할때 엔터프라이즈급으로도 충분히 사용가능한 기본적인 ci/cd를 구성해줌 </li></ul><p><br><br><br></p><h1 id="QnA"><a href="#QnA" class="headerlink" title="QnA"></a>QnA</h1><ol><li><p>MSA로 전환할 때에 도메인, 조직의 규모, 모듈/서비스별 스케일 등을 고려하여 전환 전략을 짜고 분리된 시스템간의 상호작용을 어떤 방식으로 가져갈지를 선택하게 될 텐데, 이에 대해 참고할만한 가이드같은 것이 있을까요?</p><blockquote><p>서비스를 잘못나눠두면 엄청고생하니, 먼저 크게 나눠놓고 모듈러 모노리스로 시작해서, 서비스를 정확하게 분리해야하는 상황이 오면 분리하세요<br>조직이 워터풀이거나 프로젝트기간이 정해져있거나, MSA 전환에 있어 strict한 개발방법론을 사용하면  안 맞을 수 있어요</p></blockquote></li><li><p>작은 스타트업에서 홀로 백엔드 개발을 하고 있습니다. 가끔은 제 아키텍쳐의 방향이 올바른지 코드는 직관적인지 리뷰를 받고 싶은데 이런 활동을 할 수 있는 한국의 커뮤니티 플랫폼이나 유료 서비스가 있을까요?</p><blockquote><p>저자에게 직접 연락해 조언을 요청하는 것도 방법입니다. 이메일을 통해 사정을 설명한 뒤 도움을 주실 수 있는 지 물어봤습니다. 누가 먼저 와서 도와주지 않기 때문에 내가 먼저 다가가서 물어봐야 합니다</p></blockquote></li><li><p>개발 방법론을 언급해 주셨는데, agile 관련 전문성도 있으신데, 한 마디 해주세요 :)</p><blockquote><p>칸반. 스크럼 등 잘 들여다보고 우리 조직에 무엇이 맞을지를 생각해봐야 할 것같습니다<br>비즈니스에 가장 많은 가치를 줄 수 있는 것에 가장 많은 우선순위를 두고 개발을 하게되는데, 여기에 애자일을 쓸 때 더 가치있습니다</p></blockquote></li></ol><p>애자일이란 공통모듈을 먼저 개발하는 것이 아니라 가장 중요한 핵심 서비스 먼저 만드는 것이라는 연사님의 말씀이 와닿았다.</p><p><br><br><br></p><h1 id="강연추천"><a href="#강연추천" class="headerlink" title="강연추천"></a>강연추천</h1><p>마틴 파울러의 <code>소프트퉤어 아키텍처를 설명할 때는...</code> 추천</p><iframe width="100%" height="500" src="https://www.youtube-nocookie.com/embed/4E1BHTvhB7Y" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe><p><br><br><br></p><h1 id="책-추천"><a href="#책-추천" class="headerlink" title="책 추천"></a>책 추천</h1><ul><li><a href="https://www.aladin.co.kr/shop/wproduct.aspx?ItemId=33470091">열혈강의 소프트웨어 아키텍처 설계 가이드</a></li></ul><img src="https://image.aladin.co.kr/product/3347/0/cover500/896540035x_1.jpg" width="60%"/><ul><li><a href="http://www.kyobobook.co.kr/product/detailViewKor.laf?mallGb=KOR&ejkGb=KOR&barcode=9791189909253">마이크로서비스 도입, 이렇게 한다</a></li></ul><img src="http://image.kyobobook.co.kr/images/book/xlarge/253/x9791189909253.jpg" width="60%"/><ul><li><a href="https://search.daum.net/search?w=bookpage&bookId=3330282&tab=introduction&DA=LB2&q=building%20microservices">Building Microservices</a></li></ul><img src="http://image.kyobobook.co.kr/images/book/xlarge/357/x9781491950357.jpg" width="60%"/><ul><li><a href="http://www.kyobobook.co.kr/product/detailViewEng.laf?mallGb=ENG&ejkGb=ENG&linkClass=&barcode=9780134494166">Clean Architecture</a></li></ul><img src="http://image.kyobobook.co.kr/images/book/large/166/l9780134494166.jpg" width="60%"/><ul><li><a href="http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&mallGb=KOR&barcode=9791162244326&orderClick=LAG&Kc=">개발자에서 아키텍트로</a></li></ul><img src="http://image.kyobobook.co.kr/images/book/xlarge/326/x9791162244326.jpg" width="60%"/>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Lectures-Seminars/">Lectures &amp; Seminars</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/Review/">Review</category>
      
      
      <comments>https://sowon-dev.github.io/2021/07/21/210721woowacourse-architecture/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>String으로 날짜 가지고 놀기</title>
      <link>https://sowon-dev.github.io/2021/07/14/210715Calendar/</link>
      <guid>https://sowon-dev.github.io/2021/07/14/210715Calendar/</guid>
      <pubDate>Wed, 14 Jul 2021 15:00:00 GMT</pubDate>
      
      <description>&lt;p&gt;String으로 날짜를 받은 뒤 하루를 더하거나, 하루를 빼거나, 그 달의 마지막 날을 구하거나 첫번째 날을 구하는 등 날짜 연산을 하는 법을 알아보자.&lt;br&gt;사용할 라이브러리는 총 3가지이다.&lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>String으로 날짜를 받은 뒤 하루를 더하거나, 하루를 빼거나, 그 달의 마지막 날을 구하거나 첫번째 날을 구하는 등 날짜 연산을 하는 법을 알아보자.<br>사용할 라이브러리는 총 3가지이다.</p><a id="more"></a><ol><li>import java.text.SimpleDateFormat;</li><li>import java.util.Date;</li><li>import java.util.Calendar;</li></ol><p><br><br><br></p><h2 id="String으로-날짜-연산하기"><a href="#String으로-날짜-연산하기" class="headerlink" title="String으로 날짜 연산하기"></a>String으로 날짜 연산하기</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">SimpleDateFormat sdfYMDHms = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss.SSS"</span>);</span><br><span class="line">SimpleDateFormat sdfYMD = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>);</span><br><span class="line"></span><br><span class="line">String test = <span class="string">"2021-07-16"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//String을 날짜 연산을 위해 Date 객체로 변경</span></span><br><span class="line">Date date = sdfYMD.parse(test); </span><br><span class="line"></span><br><span class="line"><span class="comment">//날짜 연산을 위한 Calendar객체 생성 후 date 대입</span></span><br><span class="line">Calendar cal = Calendar.getInstance();</span><br><span class="line">cal.setTime(date);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// add 하기</span></span><br><span class="line">cal.add(Calendar.MILLISECOND, <span class="number">10</span>); <span class="comment">//10밀리초 더하기</span></span><br><span class="line">System.out.println(<span class="string">"10밀리초 더하기: "</span>+sdfYMDHms.format(cal.getTime()));</span><br><span class="line"></span><br><span class="line">cal.add(Calendar.MINUTE, <span class="number">10</span>); <span class="comment">//10분 더하기 </span></span><br><span class="line">System.out.println(<span class="string">"10분 더하기: "</span>+sdfYMDHms.format(cal.getTime()));</span><br><span class="line"></span><br><span class="line">cal.add(Calendar.MINUTE, -<span class="number">10</span>); <span class="comment">//10분 빼기 </span></span><br><span class="line">System.out.println(<span class="string">"10분 빼기: "</span>+sdfYMDHms.format(cal.getTime()));</span><br><span class="line"></span><br><span class="line">cal.add(Calendar.HOUR, <span class="number">1</span>); <span class="comment">//1시간 후 </span></span><br><span class="line">System.out.println(<span class="string">"1시간 후: "</span>+sdfYMDHms.format(cal.getTime()));</span><br><span class="line"></span><br><span class="line">cal.add(Calendar.HOUR, -<span class="number">1</span>); <span class="comment">//1시간 전 </span></span><br><span class="line">System.out.println(<span class="string">"1시간 전: "</span>+sdfYMDHms.format(cal.getTime()));</span><br><span class="line"></span><br><span class="line">cal.add(Calendar.DATE, <span class="number">1</span>); <span class="comment">// 1일 더하기</span></span><br><span class="line">System.out.println(<span class="string">"1일 더하기: "</span>+sdfYMD.format(cal.getTime()));</span><br><span class="line"></span><br><span class="line">cal.add(Calendar.DATE, -<span class="number">1</span>); <span class="comment">// 1일 빼기  </span></span><br><span class="line">System.out.println(<span class="string">"1일 빼기: "</span>+sdfYMD.format(cal.getTime()));</span><br><span class="line"></span><br><span class="line">cal.add(Calendar.MONTH, <span class="number">1</span>); <span class="comment">// 한달 더하기</span></span><br><span class="line">System.out.println(<span class="string">"한 달 더하기: "</span>+sdfYMD.format(cal.getTime()));</span><br><span class="line"></span><br><span class="line">cal.add(Calendar.MONTH, -<span class="number">1</span>); <span class="comment">// 한달 빼기  </span></span><br><span class="line">System.out.println(<span class="string">"한 달 빼기: "</span>+sdfYMD.format(cal.getTime()));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// set 하기</span></span><br><span class="line">cal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY); <span class="comment">// 해당 일자가 있는 주의 월요일 구하기</span></span><br><span class="line">System.out.println(<span class="string">"해당 일자가 있는 주의 월요일 구하기: "</span>+sdfYMD.format(cal.getTime()));   </span><br><span class="line"></span><br><span class="line">cal.set(Calendar.DAY_OF_MONTH, cal.getActualMaximum(Calendar.DAY_OF_MONTH)); <span class="comment">// 해당 월 마지막날 구하기</span></span><br><span class="line">System.out.println(<span class="string">"해당 월 마지막날 구하기: "</span>+sdfYMD.format(cal.getTime()));   </span><br><span class="line"></span><br><span class="line"><span class="comment">// 해당 일자 무슨 요일인지 구하기 일요일:0 월요일 1 ~ 토요일 7</span></span><br><span class="line">System.out.println(<span class="string">"해당 월 마지막날의 요일 구하기: "</span>+ cal.get(Calendar.DAY_OF_WEEK));</span><br></pre></td></tr></table></figure><p>출력값은 아래와 같다.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span>밀리초 더하기: <span class="number">2021</span>-<span class="number">07</span>-<span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00.010</span></span><br><span class="line"><span class="number">10</span>분 더하기: <span class="number">2021</span>-<span class="number">07</span>-<span class="number">16</span> <span class="number">00</span>:<span class="number">10</span>:<span class="number">00.010</span></span><br><span class="line"><span class="number">10</span>분 빼기: <span class="number">2021</span>-<span class="number">07</span>-<span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00.010</span></span><br><span class="line"><span class="number">1</span>시간 후: <span class="number">2021</span>-<span class="number">07</span>-<span class="number">16</span> <span class="number">01</span>:<span class="number">00</span>:<span class="number">00.010</span></span><br><span class="line"><span class="number">1</span>시간 전: <span class="number">2021</span>-<span class="number">07</span>-<span class="number">16</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">00.010</span></span><br><span class="line"><span class="number">1</span>일 더하기: <span class="number">2021</span>-<span class="number">07</span>-<span class="number">17</span></span><br><span class="line"><span class="number">1</span>일 빼기: <span class="number">2021</span>-<span class="number">07</span>-<span class="number">16</span></span><br><span class="line">한 달 더하기: <span class="number">2021</span>-<span class="number">08</span>-<span class="number">16</span></span><br><span class="line">한 달 빼기: <span class="number">2021</span>-<span class="number">07</span>-<span class="number">16</span></span><br><span class="line">해당 일자가 있는 주의 일요일 구하기: <span class="number">2021</span>-<span class="number">07</span>-<span class="number">12</span></span><br><span class="line">해당 월 마지막날 구하기: <span class="number">2021</span>-<span class="number">07</span>-<span class="number">31</span></span><br><span class="line">해당 월 마지막날의 요일 구하기: <span class="number">7</span></span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/JAVA/">JAVA</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/java-util-Calendar/">java.util.Calendar</category>
      
      
      <comments>https://sowon-dev.github.io/2021/07/14/210715Calendar/#disqus_thread</comments>
      
    </item>
    
    <item>
      <title>[Eclip/STS]특정 파일이  커밋이 안 될때, 파일아이콘에 체크표시가 되어있을때</title>
      <link>https://sowon-dev.github.io/2021/07/07/210708sts-icon-meaning/</link>
      <guid>https://sowon-dev.github.io/2021/07/07/210708sts-icon-meaning/</guid>
      <pubDate>Wed, 07 Jul 2021 16:19:12 GMT</pubDate>
      
      <description>&lt;p&gt;STS에서 열심히 코딩하고 커밋하려고 하는데 특정 파일만 자꾸 Git Staging에 올라오지도 않고 index에 추가되지도 않으며 Commit도 되질 않았다.&lt;br&gt;도대체 문제가 뭘까.&lt;br&gt;설정을 확인하며 파일을 유심히 보는데 오 홀리!!! 해당 파일의 작은 아이콘 모양이 다른 파일들과 달랐다.&lt;br&gt;왕년의 다른그림찾기실력이 여기서 쓰일 줄이야. 😂 &lt;/p&gt;</description>
      
      
      
      <content:encoded><![CDATA[<p>STS에서 열심히 코딩하고 커밋하려고 하는데 특정 파일만 자꾸 Git Staging에 올라오지도 않고 index에 추가되지도 않으며 Commit도 되질 않았다.<br>도대체 문제가 뭘까.<br>설정을 확인하며 파일을 유심히 보는데 오 홀리!!! 해당 파일의 작은 아이콘 모양이 다른 파일들과 달랐다.<br>왕년의 다른그림찾기실력이 여기서 쓰일 줄이야. 😂 </p><a id="more"></a><p><br><br><br></p><h2 id="원인"><a href="#원인" class="headerlink" title="원인"></a>원인</h2><p>다른 파일들은 노란 네모 아이콘이 있는데 해당 파일에만 체크 아이콘이 있었다.<br>이 작은 아이콘을 가볍게 여겨선 안된다.<br>Assume unchanged라는 의미로 git에서 해당 파일이 무슨 변화가 있든 변화가 없다고 받아드리겠다는 의미이다.<br>그러니 내가 아무리 코드를 수정해도 git은 수정사항이 없다고 판단하고 staging에 올리지도 않았다.</p><p><br><br><br></p><h2 id="ICON-뜻-알아보기"><a href="#ICON-뜻-알아보기" class="headerlink" title="ICON 뜻 알아보기"></a>ICON 뜻 알아보기</h2><p>아래 이미지의 순서대로 아이콘의 의미를 알아보자.</p><p><img src="https://wiki.eclipse.org/images/0/07/02-IconDecorations.png" alt="https://wiki.eclipse.org/EGit/User_Guide/State"></p><ul><li>floder앞에 닫는 태그 <code>&gt;</code> (dirty) : 이 폴더 안의 적어도 하나 이상의 파일이 dirty 하다. 즉 변화가 있는 파일이 있다.</li><li>노란 네모 (tracked) : Git 레포지토리에 해당 파일를 추적 중이다.</li><li><code>?</code> (untracked) : Git 레포지토리에서 처음 보는 파일이다. 즉 신규 파일을 생성한 경우 이렇게 뜬다.</li><li>아이콘 없음 (ignored) : .gitignore 파일 안에 명시된 파일이나 git에 올라가지 않는 무시되고있는 파일이다.<ul><li>설정 및 확인방법 1. 파일 우클릭-&gt;Team-&gt;ignore</li><li>설정 및 확인방법 2. preference-&gt;Team-&gt;Ignored Resources</li></ul></li><li>dirty.txt앞에 닫는 태그<code>&gt;</code> (dirty) : 인덱스 및 레포지토리에 추가되지 않은 변경사항이 있는 파일이다.</li><li><code>*</code> (staged) : 해당 파일이 인덱스에 추가되었다. </li><li><code>*</code>와 <code>&gt;</code> (partially-staged) : 해당 파일의 수정사항이 인덱스에 추가된 후 해당 파일에 변경사항이 있다.</li><li><code>+</code> (added) : 해당 파일이 인덱스에 추가되었다.</li><li><code>x</code> (removed) : 해당 파일이 로컬 디렉토리에서 삭제되면서 버전이 변경되었다. 이 표시는 프로젝트 구조가 아닌 Git staging 메뉴에서 확인할 수 있다.</li><li>빨간 마름모 (conflict) : 해당 파일에 merge 충돌이 있다.</li><li>파란 <code>✓</code> (assume-valid) : 해당 파일에 무슨 변화가 있더라도 변화가 없다고 판단한다.<ul><li>설정방법 : Team -&gt;Assume unchanged 또는 Not Assume unchanged</li></ul></li></ul><p><br><br><br></p><h2 id="GUI로-해결하기"><a href="#GUI로-해결하기" class="headerlink" title="GUI로 해결하기"></a>GUI로 해결하기</h2><ol><li>체크 아이콘이 있는 파일 우클릭</li><li>아래 이미지처럼 Team -&gt; Advanced -&gt; No Assume Unchanged 클릭<br><img src="/img/210708sts-icon.PNG" alt=""></li><li>2번을 실행해도 여전히 체크 아이콘이 있을 것이다. 당황하지 않고 😁 STS/이클립스를 재시작해준다.</li><li>재시작 후 확인해보면 해당 파일의 체크 아이콘이 노란 네모 아이콘으로 바뀐 것을 확인할 수 있다!</li></ol><p>해결!</p><p><br><br><br></p><h2 id="CLI로-해결하기"><a href="#CLI로-해결하기" class="headerlink" title="CLI로 해결하기"></a>CLI로 해결하기</h2><p>CLI로 설정하는 방법은 <a href="https://www.zerocho.com/category/Git/post/60ceb24dcc6ccc0004c38287">특정 파일만 커밋하지 않기(–assume-unchanged)</a>를 참고하면 된다.</p><p><br><br><br></p><h2 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h2><ul><li><a href="https://wiki.eclipse.org/EGit/User_Guide/State">https://wiki.eclipse.org/EGit/User_Guide/State</a></li></ul>]]></content:encoded>
      
      
      <category domain="https://sowon-dev.github.io/categories/Journal/">Journal</category>
      
      
      <category domain="https://sowon-dev.github.io/tags/Eclipse/">Eclipse</category>
      
      <category domain="https://sowon-dev.github.io/tags/STS/">STS</category>
      
      
      <comments>https://sowon-dev.github.io/2021/07/07/210708sts-icon-meaning/#disqus_thread</comments>
      
    </item>
    
  </channel>
</rss>
